/*! For license information please see module.js.LICENSE.txt */
define(["@grafana/data","@grafana/runtime","@emotion/css","@grafana/ui","react","redux","react-redux","react-dom"],((e,t,n,r,o,i,a,l)=>(()=>{"use strict";var s={344:(e,t,n)=>{var r=n(644),o=n(388),i=n(650);const a=e=>({rootOutline:r.css`
      border: 1px solid ${e.colors.border.weak};
      background-color: ${e.colors.background.primary};
    `,header:r.css`
      padding: ${e.spacing(.5,.5)};
      min-height: ${e.spacing(4)};
      display: flex;
      align-items: center;
      justify-content: flex-start;
      white-space: nowrap;

      &:focus {
        outline: none;
      }
    `,headerSolid:r.css`
      border-radius: ${e.shape.radius?.default};
      background: ${e.colors.background.secondary};
    `,title:r.css`
      font-weight: ${e.typography.fontWeightBold};
      margin: ${e.spacing(0,.5)};
      overflow: hidden;
      text-overflow: ellipsis;
    `,collapseIcon:r.css`
      margin-left: ${e.spacing(.5)};
      color: ${e.colors.text.disabled};
    `,actions:r.css`
      margin-left: auto;
      display: flex;
      align-items: center;
    `});t.U=({title:e,actions:t,children:n,isOpen:l=!1,onToggle:s,headerTestId:u,contentTestId:d,fill:c="outline",isInlineContent:g=!1})=>{const p=o.useTheme2(),f=o.useStyles2(a),m="solid"===c,v="outline"===c;return i.createElement("div",{className:r.cx({[f.rootOutline]:v})},i.createElement("div",{className:r.cx(f.header,{[f.headerSolid]:m}),"data-testid":u,onClick:()=>s?.(!l)},i.createElement(o.IconButton,{name:l?"angle-down":"angle-right",tooltip:l?"Collapse":"Expand",className:f.collapseIcon,"aria-expanded":l}),i.createElement("div",{className:f.title},e),t&&i.createElement("div",{className:f.actions,onClick:e=>e.stopPropagation()},t)),l&&i.createElement("div",{style:{padding:g?0:p.spacing(.5)},"data-testid":d},n))}},644:e=>{e.exports=n},305:t=>{t.exports=e},545:e=>{e.exports=t},388:e=>{e.exports=r},650:e=>{e.exports=o},729:e=>{e.exports=l},929:e=>{e.exports=a},129:e=>{e.exports=i}},u={};function d(e){var t=u[e];if(void 0!==t)return t.exports;var n=u[e]={exports:{}};return s[e](n,n.exports,d),n.exports}d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{d.r(c),d.d(c,{plugin:()=>ol});var e=d(305),t=d(545),n=d(644),r=d(388),o=d(344),i=d(650),a=d.n(i);function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}var g=d(129),p=d(929);function f(e,t){var n=(0,i.useState)((function(){return{inputs:t,result:e()}}))[0],r=(0,i.useRef)(!0),o=(0,i.useRef)(n),a=r.current||Boolean(t&&o.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,o.current.inputs))?o.current:{inputs:t,result:e()};return(0,i.useEffect)((function(){r.current=!1,o.current=a}),[a]),a.result}var m=f,v=function(e,t){return f((function(){return e}),t)},b=function(e){var t=e.top,n=e.right,r=e.bottom,o=e.left;return{top:t,right:n,bottom:r,left:o,width:n-o,height:r-t,x:o,y:t,center:{x:(n+o)/2,y:(r+t)/2}}},h=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},y=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},w={top:0,right:0,bottom:0,left:0},C=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?w:n,o=e.border,i=void 0===o?w:o,a=e.padding,l=void 0===a?w:a,s=b(h(t,r)),u=b(y(t,i)),d=b(y(u,l));return{marginBox:s,borderBox:b(t),paddingBox:u,contentBox:d,margin:r,border:i,padding:l}},S=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(e,t){throw new Error("Invariant failed")}(),n},x=function(e,t){var n,r,o=e.borderBox,i=e.border,a=e.margin,l=e.padding,s=(r=t,{top:(n=o).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return C({borderBox:s,border:i,margin:a,padding:l})},I=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),x(e,t)},E=function(e,t){var n={top:S(t.marginTop),right:S(t.marginRight),bottom:S(t.marginBottom),left:S(t.marginLeft)},r={top:S(t.paddingTop),right:S(t.paddingRight),bottom:S(t.paddingBottom),left:S(t.paddingLeft)},o={top:S(t.borderTopWidth),right:S(t.borderRightWidth),bottom:S(t.borderBottomWidth),left:S(t.borderLeftWidth)};return C({borderBox:e,margin:n,padding:r,border:o})},R=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return E(t,n)},D=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function O(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!((r=e[n])===(o=t[n])||D(r)&&D(o)))return!1;var r,o;return!0}const A=function(e,t){var n;void 0===t&&(t=O);var r,o=[],i=!1;return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return i&&n===this&&t(a,o)||(r=e.apply(this,a),i=!0,n=this,o=a),r}},P=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t=o,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};var M=d(729),F=d.n(M);function B(e,t){}function N(){}function T(e,t,n){var r=t.map((function(t){var r,o,i=(r=n,o=t.options,u({},r,{},o));return e.addEventListener(t.eventName,t.fn,i),function(){e.removeEventListener(t.eventName,t.fn,i)}}));return function(){r.forEach((function(e){e()}))}}B.bind(null,"warn"),B.bind(null,"error");var L=!0,k="Invariant failed";function V(e){this.message=e}function _(e,t){if(!e)throw new V(L?k:k+": "+(t||""))}V.prototype.toString=function(){return this.message};var G=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=N,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof V&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}s(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=T(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof V))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(a().Component),H=function(e){return e+1},j=function(e,t){var n=e.droppableId===t.droppableId,r=H(e.index),o=H(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+o+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+o+"\n  "},z=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},U=function(e){return"\n  The item has returned to its starting position\n  of "+H(e.index)+"\n"},$=function(e){return"\n  You have lifted an item in position "+H(e.source.index)+"\n"},W=function(e){var t=e.destination;if(t)return j(e.source,t);var n=e.combine;return n?z(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},q=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+U(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+j(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+z(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+U(e.source)+"\n  "},X={x:0,y:0},Y=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},K=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},J=function(e,t){return e.x===t.x&&e.y===t.y},Q=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},Z=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},ee=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},te=function(e,t){return Math.min.apply(Math,t.map((function(t){return ee(e,t)})))},ne=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},re=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},oe=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},ie=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=b({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):b(e)},ae=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,o=e.frame,i=function(e,t){return t?re(e,t.scroll.diff.displacement):e}(t.marginBox,o),a=function(e,t,n){var r;return n&&n.increasedBy?u({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(i,r,n);return{page:t,withPlaceholder:n,active:ie(a,o)}},le=function(e,t){e.frame||_(!1);var n=e.frame,r=K(t,n.scroll.initial),o=Q(r),i=u({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:o},max:n.scroll.max}});return u({},e,{frame:i,subject:ae({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i})})};function se(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function ue(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function de(e,t){if(e.find)return e.find(t);var n=ue(e,t);return-1!==n?e[n]:void 0}function ce(e){return Array.prototype.slice.call(e)}var ge=A((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),pe=A((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),fe=A((function(e){return se(e)})),me=A((function(e){return se(e)})),ve=A((function(e,t){var n=me(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}));return n}));function be(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function he(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var ye=A((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),we=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Ce={point:X,value:0},Se={invisible:{},visible:{},all:[]},xe={displaced:Se,displacedBy:Ce,at:null},Ie=function(e,t){return function(n){return e<=n&&n<=t}},Ee=function(e){var t=Ie(e.top,e.bottom),n=Ie(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var o=t(r.top)||t(r.bottom),i=n(r.left)||n(r.right);if(o&&i)return!0;var a=r.top<e.top&&r.bottom>e.bottom,l=r.left<e.left&&r.right>e.right;return!(!a||!l)||a&&i||l&&o}},Re=function(e){var t=Ie(e.top,e.bottom),n=Ie(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},De={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Oe={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Ae=function(e){var t=e.target,n=e.destination,r=e.viewport,o=e.withDroppableDisplacement,i=e.isVisibleThroughFrameFn,a=o?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:X;return re(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(a,n,i)&&function(e,t,n){return n(t)(e)}(a,r,i)},Pe=function(e){return Ae(u({},e,{isVisibleThroughFrameFn:Ee}))},Me=function(e){return Ae(u({},e,{isVisibleThroughFrameFn:Re}))},Fe=function(e,t,n){if("boolean"==typeof n)return n;if(!t)return!0;var r=t.invisible,o=t.visible;if(r[e])return!1;var i=o[e];return!i||i.shouldAnimate};function Be(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,o=e.viewport,i=e.forceShouldAnimate,a=e.last;return t.reduce((function(e,t){var l=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return b(h(n,r))}(t,r),s=t.descriptor.id;if(e.all.push(s),!Pe({target:l,destination:n,viewport:o,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var u={draggableId:s,shouldAnimate:Fe(s,a,i)};return e.visible[s]=u,e}),{all:[],visible:{},invisible:{}})}function Ne(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,o=e.destination,i=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:Se,displacedBy:r,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:i}}}}function Te(e){var t=e.draggable,n=e.insideDestination,r=e.destination,o=e.viewport,i=e.displacedBy,a=e.last,l=e.index,s=e.forceShouldAnimate,u=we(t,r);if(null==l)return Ne({insideDestination:n,inHomeList:u,displacedBy:i,destination:r});var d=de(n,(function(e){return e.descriptor.index===l}));if(!d)return Ne({insideDestination:n,inHomeList:u,displacedBy:i,destination:r});var c=ye(t,n),g=n.indexOf(d);return{displaced:Be({afterDragging:c.slice(g),destination:r,displacedBy:i,last:a,viewport:o.frame,forceShouldAnimate:s}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:l}}}}function Le(e,t){return Boolean(t.effected[e])}var ke=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},Ve=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},_e=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return Z(t.line,n.marginBox[t.end]+ke(t,r),Ve(t,n.marginBox,r))},Ge=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return Z(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),Ve(t,n.marginBox,r))},He=function(e,t){var n=e.frame;return n?Y(t,n.scroll.diff.displacement):t},je=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,o=e.draggables,i=e.afterCritical,a=n.page.borderBox.center,l=t.at;return r&&l?"REORDER"===l.type?function(e){var t=e.impact,n=e.draggable,r=e.draggables,o=e.droppable,i=e.afterCritical,a=ve(o.descriptor.id,r),l=n.page,s=o.axis;if(!a.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return Z(t.line,n.contentBox[t.start]+ke(t,r),Ve(t,n.contentBox,r))}({axis:s,moveInto:o.page,isMoving:l});var u=t.displaced,d=t.displacedBy,c=u.all[0];if(c){var g=r[c];if(Le(c,i))return Ge({axis:s,moveRelativeTo:g.page,isMoving:l});var p=x(g.page,d.point);return Ge({axis:s,moveRelativeTo:p,isMoving:l})}var f=a[a.length-1];if(f.descriptor.id===n.descriptor.id)return l.borderBox.center;if(Le(f.descriptor.id,i)){var m=x(f.page,Q(i.displacedBy.point));return _e({axis:s,moveRelativeTo:m,isMoving:l})}return _e({axis:s,moveRelativeTo:f.page,isMoving:l})}({impact:t,draggable:n,draggables:o,droppable:r,afterCritical:i}):function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,o=he(n);o||_(!1);var i=o.draggableId,a=r[i].page.borderBox.center,l=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,o=e.displacedBy,i=Boolean(t.visible[r]||t.invisible[r]);return Le(r,n)?i?X:Q(o.point):i?o.point:X}({displaced:n.displaced,afterCritical:t,combineWith:i,displacedBy:n.displacedBy});return Y(a,l)}({impact:t,draggables:o,afterCritical:i}):a}(e),n=e.droppable;return n?He(n,t):t},ze=function(e,t){var n=K(t,e.scroll.initial),r=Q(n);return{frame:b({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function Ue(e,t){return e.map((function(e){return t[e]}))}var $e=function(e){var t,n,r=e.pageBorderBoxCenter,o=e.draggable,i=(t=e.viewport,n=r,Y(t.scroll.diff.displacement,n)),a=K(i,o.page.borderBox.center);return Y(o.client.borderBox.center,a)},We=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,o=e.viewport,i=e.withDroppableDisplacement,a=e.onlyOnMainAxis,l=void 0!==a&&a,s=K(r,t.page.borderBox.center),d={target:re(t.page.borderBox,s),destination:n,withDroppableDisplacement:i,viewport:o};return l?function(e){return Ae(u({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=Ie(e.top,e.bottom),r=Ie(e.left,e.right);return function(e){return t===De?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(d):Me(d)},qe=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,o=e.draggables,i=e.previousImpact,a=e.viewport,l=e.previousPageBorderBoxCenter,s=e.previousClientSelection,d=e.afterCritical;if(!r.isEnabled)return null;var c=ve(r.descriptor.id,o),g=we(n,r),p=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,o=e.insideDestination,i=e.previousImpact;if(!r.isCombineEnabled)return null;if(!be(i))return null;function a(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return u({},i,{at:t})}var l=i.displaced.all,s=l.length?l[0]:null;if(t)return s?a(s):null;var d=ye(n,o);if(!s)return d.length?a(d[d.length-1].descriptor.id):null;var c=ue(d,(function(e){return e.descriptor.id===s}));-1===c&&_(!1);var g=c-1;return g<0?null:a(d[g].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:c,previousImpact:i})||function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,o=e.draggables,i=e.destination,a=e.insideDestination,l=e.previousImpact,s=e.viewport,u=e.afterCritical,d=l.at;if(d||_(!1),"REORDER"===d.type){var c=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,o=e.location;if(!r.length)return null;var i=o.index,a=t?i+1:i-1,l=r[0].descriptor.index,s=r[r.length-1].descriptor.index;return a<l||a>(n?s:s+1)?null:a}({isMovingForward:t,isInHomeList:n,location:d.destination,insideDestination:a});return null==c?null:Te({draggable:r,insideDestination:a,destination:i,viewport:s,last:l.displaced,displacedBy:l.displacedBy,index:c})}var g=function(e){var t=e.isMovingForward,n=e.draggables,r=e.combine,o=e.afterCritical;if(!e.destination.isCombineEnabled)return null;var i=r.draggableId,a=n[i].descriptor.index;return Le(i,o)?t?a:a-1:t?a+1:a}({isMovingForward:t,destination:i,displaced:l.displaced,draggables:o,combine:d.combine,afterCritical:u});return null==g?null:Te({draggable:r,insideDestination:a,destination:i,viewport:s,last:l.displaced,displacedBy:l.displacedBy,index:g})}({isMovingForward:t,isInHomeList:g,draggable:n,draggables:o,destination:r,insideDestination:c,previousImpact:i,viewport:a,afterCritical:d});if(!p)return null;var f=je({impact:p,draggable:n,droppable:r,draggables:o,afterCritical:d});if(We({draggable:n,destination:r,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:$e({pageBorderBoxCenter:f,draggable:n,viewport:a}),impact:p,scrollJumpRequest:null};var m=K(f,l),v=function(e){var t=e.impact,n=e.viewport,r=e.destination,o=e.draggables,i=e.maxScrollChange,a=ze(n,Y(n.scroll.current,i)),l=r.frame?le(r,Y(r.frame.scroll.current,i)):r,s=t.displaced,d=Be({afterDragging:Ue(s.all,o),destination:r,displacedBy:t.displacedBy,viewport:a.frame,last:s,forceShouldAnimate:!1}),c=Be({afterDragging:Ue(s.all,o),destination:l,displacedBy:t.displacedBy,viewport:n.frame,last:s,forceShouldAnimate:!1}),g={},p={},f=[s,d,c];return s.all.forEach((function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,f);t?p[e]=t:g[e]=!0})),u({},t,{displaced:{all:s.all,invisible:g,visible:p}})}({impact:p,viewport:a,destination:r,draggables:o,maxScrollChange:m});return{clientSelection:s,impact:v,scrollJumpRequest:m}},Xe=function(e){var t=e.subject.active;return t||_(!1),t},Ye=function(e,t){var n=e.page.borderBox.center;return Le(e.descriptor.id,t)?K(n,t.displacedBy.point):n},Ke=function(e,t){var n=e.page.borderBox;return Le(e.descriptor.id,t)?re(n,Q(t.displacedBy.point)):n},Je=A((function(e,t){var n=t[e.line];return{value:n,point:Z(e.line,n)}})),Qe=function(e,t){return u({},e,{scroll:u({},e.scroll,{max:t})})},Ze=function(e,t,n){var r=e.frame;we(t,e)&&_(!1),e.subject.withPlaceholder&&_(!1);var o=Je(e.axis,t.displaceBy).point,i=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return Z(r.line,t[r.line]);var o=e.subject.page.contentBox[r.size],i=ve(e.descriptor.id,n).reduce((function(e,t){return e+t.client.marginBox[r.size]}),0)+t[r.line]-o;return i<=0?null:Z(r.line,i)}(e,o,n),a={placeholderSize:o,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return u({},e,{subject:ae({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame})});var l=i?Y(r.scroll.max,i):r.scroll.max,s=Qe(r,l);return u({},e,{subject:ae({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:s}),frame:s})},et=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},tt=function(e){var t=e.state,n=e.type,r=function(e,t){var n=et(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),o=Boolean(r),i=t.dimensions.droppables[t.critical.droppable.id],a=r||i,l=a.axis.direction,s="vertical"===l&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===l&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(s&&!o)return null;var u="MOVE_DOWN"===n||"MOVE_RIGHT"===n,d=t.dimensions.draggables[t.critical.draggable.id],c=t.current.page.borderBoxCenter,g=t.dimensions,p=g.draggables,f=g.droppables;return s?qe({isMovingForward:u,previousPageBorderBoxCenter:c,draggable:d,destination:a,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,o=e.isOver,i=e.draggables,a=e.droppables,l=e.viewport,s=e.afterCritical,u=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,o=e.droppables,i=e.viewport,a=r.subject.active;if(!a)return null;var l=r.axis,s=Ie(a[l.start],a[l.end]),u=fe(o).filter((function(e){return e!==r})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return Ee(i.frame)(Xe(e))})).filter((function(e){var n=Xe(e);return t?a[l.crossAxisEnd]<n[l.crossAxisEnd]:n[l.crossAxisStart]<a[l.crossAxisStart]})).filter((function(e){var t=Xe(e),n=Ie(t[l.start],t[l.end]);return s(t[l.start])||s(t[l.end])||n(a[l.start])||n(a[l.end])})).sort((function(e,n){var r=Xe(e)[l.crossAxisStart],o=Xe(n)[l.crossAxisStart];return t?r-o:o-r})).filter((function(e,t,n){return Xe(e)[l.crossAxisStart]===Xe(n[0])[l.crossAxisStart]}));if(!u.length)return null;if(1===u.length)return u[0];var d=u.filter((function(e){return Ie(Xe(e)[l.start],Xe(e)[l.end])(n[l.line])}));return 1===d.length?d[0]:d.length>1?d.sort((function(e,t){return Xe(e)[l.start]-Xe(t)[l.start]}))[0]:u.sort((function(e,t){var r=te(n,oe(Xe(e))),o=te(n,oe(Xe(t)));return r!==o?r-o:Xe(e)[l.start]-Xe(t)[l.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:o,droppables:a,viewport:l});if(!u)return null;var d=ve(u.descriptor.id,i),c=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,o=e.afterCritical,i=e.insideDestination.filter((function(e){return Me({target:Ke(e,o),destination:r,viewport:n.frame,withDroppableDisplacement:!0})})).sort((function(e,n){var i=ee(t,He(r,Ye(e,o))),a=ee(t,He(r,Ye(n,o)));return i<a?-1:a<i?1:e.descriptor.index-n.descriptor.index}));return i[0]||null}({pageBorderBoxCenter:n,viewport:l,destination:u,insideDestination:d,afterCritical:s}),g=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,o=e.draggable,i=e.draggables,a=e.destination,l=e.viewport,s=e.afterCritical;if(!n){if(r.length)return null;var u={displaced:Se,displacedBy:Ce,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},d=je({impact:u,draggable:o,droppable:a,draggables:i,afterCritical:s}),c=we(o,a)?a:Ze(a,o,i);return We({draggable:o,destination:c,newPageBorderBoxCenter:d,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?u:null}var g,p=Boolean(t[a.axis.line]<=n.page.borderBox.center[a.axis.line]),f=(g=n.descriptor.index,n.descriptor.id===o.descriptor.id||p?g:g+1);return Te({draggable:o,insideDestination:r,destination:a,viewport:l,displacedBy:Je(a.axis,o.displaceBy),last:Se,index:f})}({previousPageBorderBoxCenter:n,destination:u,draggable:r,draggables:i,moveRelativeTo:c,insideDestination:d,viewport:l,afterCritical:s});if(!g)return null;var p=je({impact:g,draggable:r,droppable:u,draggables:i,afterCritical:s});return{clientSelection:$e({pageBorderBoxCenter:p,draggable:r,viewport:l}),impact:g,scrollJumpRequest:null}}({isMovingForward:u,previousPageBorderBoxCenter:c,draggable:d,isOver:a,draggables:p,droppables:f,viewport:t.viewport,afterCritical:t.afterCritical})};function nt(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function rt(e){var t=Ie(e.top,e.bottom),n=Ie(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}var ot=function(e,t){return b(re(e,t))};function it(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var at=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,o=e.droppables,i=e.previousImpact,a=e.viewport,l=e.afterCritical,s=ot(n.page.borderBox,t),u=function(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,o=fe(r).filter((function(e){if(!e.isEnabled)return!1;var n,r,o=e.subject.active;if(!o)return!1;if(r=o,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(rt(o)(t.center))return!0;var i=e.axis,a=o.center[i.crossAxisLine],l=t[i.crossAxisStart],s=t[i.crossAxisEnd],u=Ie(o[i.crossAxisStart],o[i.crossAxisEnd]),d=u(l),c=u(s);return!d&&!c||(d?l<a:s>a)}));return o.length?1===o.length?o[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.candidates,r=e.draggable.page.borderBox.center,o=n.map((function(e){var n=e.axis,o=Z(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:ee(r,o)}})).sort((function(e,t){return t.distance-e.distance}));return o[0]?o[0].id:null}({pageBorderBox:t,draggable:n,candidates:o}):null}({pageBorderBox:s,draggable:n,droppables:o});if(!u)return xe;var d=o[u],c=ve(d.descriptor.id,r),g=function(e,t){var n=e.frame;return n?ot(t,n.scroll.diff.value):t}(d,s);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,o=e.destination,i=e.insideDestination,a=e.afterCritical;if(!o.isCombineEnabled)return null;var l=o.axis,s=Je(o.axis,t.displaceBy),u=s.value,d=n[l.start],c=n[l.end],g=de(ye(t,i),(function(e){var t=e.descriptor.id,n=e.page.borderBox,o=n[l.size]/4,i=Le(t,a),s=it({displaced:r.displaced,id:t});return i?s?c>n[l.start]+o&&c<n[l.end]-o:d>n[l.start]-u+o&&d<n[l.end]-u-o:s?c>n[l.start]+u+o&&c<n[l.end]+u-o:d>n[l.start]+o&&d<n[l.end]-o}));return g?{displacedBy:s,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:o.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:g,draggable:n,previousImpact:i,destination:d,insideDestination:c,afterCritical:l})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,o=e.insideDestination,i=e.last,a=e.viewport,l=e.afterCritical,s=r.axis,u=Je(r.axis,n.displaceBy),d=u.value,c=t[s.start],g=t[s.end],p=function(e){var t=e.draggable,n=e.closest;return n?e.inHomeList&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:de(ye(n,o),(function(e){var t=e.descriptor.id,n=e.page.borderBox.center[s.line],r=Le(t,l),o=it({displaced:i,id:t});return r?o?g<=n:c<n-d:o?g<=n+d:c<n})),inHomeList:we(n,r)});return Te({draggable:n,insideDestination:o,destination:r,viewport:a,last:i,displacedBy:u,index:p})}({pageBorderBoxWithDroppableScroll:g,draggable:n,destination:d,insideDestination:c,last:i.displaced,viewport:a,afterCritical:l})},lt=function(e,t){var n;return u({},e,((n={})[t.descriptor.id]=t,n))},st=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,o=e.viewport,i=e.impact,a=e.scrollJumpRequest,l=o||t.viewport,s=r||t.dimensions,d=n||t.current.client.selection,c=K(d,t.initial.client.selection),g={offset:c,selection:d,borderBoxCenter:Y(t.initial.client.borderBoxCenter,c)},p={selection:Y(g.selection,l.scroll.current),borderBoxCenter:Y(g.borderBoxCenter,l.scroll.current),offset:Y(g.offset,l.scroll.diff.value)},f={client:g,page:p};if("COLLECTING"===t.phase)return u({phase:"COLLECTING"},t,{dimensions:s,viewport:l,current:f});var m=s.draggables[t.critical.draggable.id],v=i||at({pageOffset:p.offset,draggable:m,draggables:s.draggables,droppables:s.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),b=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,o=e.impact,i=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,o=et(t),i=et(n);if(!o)return r;if(o===i)return r;var a=r[o];if(!a.subject.withPlaceholder)return r;var l=function(e){var t=e.subject.withPlaceholder;t||_(!1);var n=e.frame;if(!n)return u({},e,{subject:ae({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||_(!1);var o=Qe(n,r);return u({},e,{subject:ae({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null}),frame:o})}(a);return lt(r,l)}({previousImpact:e.previousImpact,impact:o,droppables:r}),a=et(o);if(!a)return i;var l=r[a];if(we(t,l))return i;if(l.subject.withPlaceholder)return i;var s=Ze(l,t,n);return lt(i,s)}({draggable:m,impact:v,previousImpact:t.impact,draggables:s.draggables,droppables:s.droppables});return u({},t,{current:f,dimensions:{draggables:s.draggables,droppables:b},impact:v,viewport:l,scrollJumpRequest:a||null,forceShouldAnimate:!a&&null})},ut=function(e){var t=e.impact,n=e.viewport,r=e.draggables,o=e.destination,i=e.forceShouldAnimate,a=t.displaced,l=function(e,t){return e.map((function(e){return t[e]}))}(a.all,r);return u({},t,{displaced:Be({afterDragging:l,destination:o,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:i,last:a})})},dt=function(e){var t=e.impact,n=e.draggable,r=e.droppable,o=e.draggables,i=e.viewport,a=e.afterCritical,l=je({impact:t,draggable:n,draggables:o,droppable:r,afterCritical:a});return $e({pageBorderBoxCenter:l,draggable:n,viewport:i})},ct=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&_(!1);var o=t.impact,i=r||t.viewport,a=n||t.dimensions,l=a.draggables,s=a.droppables,u=l[t.critical.draggable.id],d=et(o);d||_(!1);var c=s[d],g=ut({impact:o,viewport:i,destination:c,draggables:l}),p=dt({impact:g,draggable:u,droppable:c,draggables:l,viewport:i,afterCritical:t.afterCritical});return st({impact:g,clientSelection:p,state:t,dimensions:a,viewport:i})},gt=function(e){var t=e.draggable,n=e.home,r=e.draggables,o=e.viewport,i=Je(n.axis,t.displaceBy),a=ve(n.descriptor.id,r),l=a.indexOf(t);-1===l&&_(!1);var s,u=a.slice(l+1),d=u.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),c={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:i,effected:d};return{impact:{displaced:Be({afterDragging:u,destination:n,displacedBy:i,last:null,viewport:o.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:(s=t.descriptor,{index:s.index,droppableId:s.droppableId})}},afterCritical:c}},pt=function(e){return"SNAP"===e.movementMode},ft=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:lt(e.droppables,t)}}(e.dimensions,t);return!pt(e)||n?st({state:e,dimensions:r}):ct({state:e,dimensions:r})};function mt(e){return e.isDragging&&"SNAP"===e.movementMode?u({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var vt={phase:"IDLE",completed:null,shouldFlush:!1},bt=function(e,t){if(void 0===e&&(e=vt),"FLUSH"===t.type)return u({},vt,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&_(!1);var n=t.payload,r=n.critical,o=n.clientSelection,i=n.viewport,a=n.dimensions,l=n.movementMode,s=a.draggables[r.draggable.id],d=a.droppables[r.droppable.id],c={selection:o,borderBoxCenter:s.client.borderBox.center,offset:X},g={client:c,page:{selection:Y(c.selection,i.scroll.initial),borderBoxCenter:Y(c.selection,i.scroll.initial),offset:Y(c.selection,i.scroll.diff.value)}},p=fe(a.droppables).every((function(e){return!e.isFixedOnPage})),f=gt({draggable:s,home:d,draggables:a.draggables,viewport:i}),m=f.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:l,dimensions:a,initial:g,current:g,isWindowScrollAllowed:p,impact:m,afterCritical:f.afterCritical,onLiftImpact:m,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&_(!1),u({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&_(!1),function(e){var t=e.state,n=e.published,r=n.modified.map((function(e){var n=t.dimensions.droppables[e.droppableId];return le(n,e.scroll)})),o=u({},t.dimensions.droppables,{},ge(r)),i=pe(function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,o=r.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,i=function(e){var t=e.frame;return t||_(!1),t}(n[t]),a=i.scroll.diff.value,l=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,o=x(t.client,n),i=I(o,r);return u({},t,{placeholder:u({},t.placeholder,{client:o}),client:o,page:i})}({draggable:e,offset:Y(o,a),initialWindowScroll:r.scroll.initial});return l}))}({additions:n.additions,updatedDroppables:o,viewport:t.viewport})),a=u({},t.dimensions.draggables,{},i);n.removals.forEach((function(e){delete a[e]}));var l={droppables:o,draggables:a},s=et(t.impact),d=s?l.droppables[s]:null,c=l.draggables[t.critical.draggable.id],g=l.droppables[t.critical.droppable.id],p=gt({draggable:c,home:g,draggables:a,viewport:t.viewport}),f=p.impact,m=p.afterCritical,v=d&&d.isCombineEnabled?t.impact:f,b=at({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:v,viewport:t.viewport,afterCritical:m}),h=u({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:b,onLiftImpact:f,dimensions:l,afterCritical:m,forceShouldAnimate:!1});return"COLLECTING"===t.phase?h:u({phase:"DROP_PENDING"},h,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;nt(e)||_(!1);var v=t.payload.client;return J(v,e.current.client.selection)?e:st({state:e,clientSelection:v,impact:pt(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return mt(e);if("COLLECTING"===e.phase)return mt(e);nt(e)||_(!1);var b=t.payload,h=b.id,y=b.newScroll,w=e.dimensions.droppables[h];if(!w)return e;var C=le(w,y);return ft(e,C,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;nt(e)||_(!1);var S=t.payload,E=S.id,R=S.isEnabled,D=e.dimensions.droppables[E];D||_(!1),D.isEnabled===R&&_(!1);var O=u({},D,{isEnabled:R});return ft(e,O,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;nt(e)||_(!1);var A=t.payload,P=A.id,M=A.isCombineEnabled,F=e.dimensions.droppables[P];F||_(!1),F.isCombineEnabled===M&&_(!1);var B=u({},F,{isCombineEnabled:M});return ft(e,B,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;nt(e)||_(!1),e.isWindowScrollAllowed||_(!1);var N=t.payload.newScroll;if(J(e.viewport.scroll.current,N))return mt(e);var T=ze(e.viewport,N);return pt(e)?ct({state:e,viewport:T}):st({state:e,viewport:T})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!nt(e))return e;var L=t.payload.maxScroll;if(J(L,e.viewport.scroll.max))return e;var k=u({},e.viewport,{scroll:u({},e.viewport.scroll,{max:L})});return u({phase:"DRAGGING"},e,{viewport:k})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&_(!1);var V=tt({state:e,type:t.type});return V?st({state:e,impact:V.impact,clientSelection:V.clientSelection,scrollJumpRequest:V.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var G=t.payload.reason;return"COLLECTING"!==e.phase&&_(!1),u({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:G})}if("DROP_ANIMATE"===t.type){var H=t.payload,j=H.completed,z=H.dropDuration,U=H.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&_(!1),{phase:"DROP_ANIMATING",completed:j,dropDuration:z,newHomeClientOffset:U,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},ht=function(e){return{type:"LIFT",payload:e}},yt=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},wt=function(){return{type:"COLLECTION_STARTING",payload:null}},Ct=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},St=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},xt=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},It=function(e){return{type:"MOVE",payload:e}},Et=function(){return{type:"MOVE_UP",payload:null}},Rt=function(){return{type:"MOVE_DOWN",payload:null}},Dt=function(){return{type:"MOVE_RIGHT",payload:null}},Ot=function(){return{type:"MOVE_LEFT",payload:null}},At=function(){return{type:"FLUSH",payload:null}},Pt=function(e){return{type:"DROP_COMPLETE",payload:e}},Mt=function(e){return{type:"DROP",payload:e}},Ft="cubic-bezier(.2,1,.1,1)",Bt=0,Nt=.7,Tt=.75,Lt="0.2s cubic-bezier(0.2, 0, 0, 1)",kt={fluid:"opacity "+Lt,snap:"transform "+Lt+", opacity "+Lt,drop:function(e){var t=e+"s "+Ft;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Lt,placeholder:"height "+Lt+", width "+Lt+", margin "+Lt},Vt=function(e){return J(e,X)?null:"translate("+e.x+"px, "+e.y+"px)"},_t=Vt,Gt=function(e,t){var n=Vt(e);return n?t?n+" scale("+Tt+")":n:null},Ht=.33,jt=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var o=t(),i=r.payload.reason;if("COLLECTING"!==o.phase){if("IDLE"!==o.phase){"DROP_PENDING"===o.phase&&o.isWaiting&&_(!1),"DRAGGING"!==o.phase&&"DROP_PENDING"!==o.phase&&_(!1);var a=o.critical,l=o.dimensions,s=l.draggables[o.critical.draggable.id],d=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,o=e.home,i=e.viewport,a=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:u({},r,{displaced:Se}),didDropInsideDroppable:!0}:{impact:ut({draggables:t,impact:a,destination:o,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:i,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),c=d.impact,g=d.didDropInsideDroppable,p=g?be(c):null,f=g?he(c):null,m={index:a.draggable.index,droppableId:a.droppable.id},v={draggableId:s.descriptor.id,type:s.descriptor.type,source:m,reason:i,mode:o.movementMode,destination:p,combine:f},b=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,o=e.viewport,i=e.afterCritical,a=r.draggables,l=r.droppables,s=et(t),u=s?l[s]:null,d=l[n.descriptor.droppableId],c=dt({impact:t,draggable:n,draggables:a,afterCritical:i,droppable:u||d,viewport:o});return K(c,n.client.borderBox.center)}({impact:c,draggable:s,dimensions:l,viewport:o.viewport,afterCritical:o.afterCritical}),h={critical:o.critical,afterCritical:o.afterCritical,result:v,impact:c};if(!J(o.current.client.offset,b)||Boolean(v.combine)){var y=function(e){var t=e.reason,n=ee(e.current,e.destination);if(n<=0)return Ht;if(n>=1500)return.55;var r=Ht+n/1500*.22000000000000003;return Number(("CANCEL"===t?.6*r:r).toFixed(2))}({current:o.current.client.offset,destination:b,reason:i});n({type:"DROP_ANIMATE",payload:{newHomeClientOffset:b,dropDuration:y,completed:h}})}else n(Pt({completed:h}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:i}))}else e(r)}}},zt=function(){return{x:window.pageXOffset,y:window.pageYOffset}};var Ut=function(e){var t=function(e){var t=e.onWindowScroll,n=P((function(){t(zt())})),r=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(n),o=N;function i(){return o!==N}return{start:function(){i()&&_(!1),o=T(window,[r])},stop:function(){i()||_(!1),n.cancel(),o(),o=N},isActive:i}}({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},$t=function(e,t){t()},Wt=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},qt=function(e,t,n,r){if(e){var o=function(e){var t=!1,n=!1,r=setTimeout((function(){n=!0})),o=function(o){t||n||(t=!0,e(o),clearTimeout(r))};return o.wasCalled=function(){return t},o}(n);e(t,{announce:o}),o.wasCalled()||n(r(t))}else n(r(t))},Xt=function(e,t){var n=function(e,t){var n,r=(n=[],{add:function(e){var t=setTimeout((function(){return function(e){var t=ue(n,(function(t){return t.timerId===e}));-1===t&&_(!1),n.splice(t,1)[0].callback()}(t)})),r={timerId:t,callback:e};n.push(r)},flush:function(){if(n.length){var e=[].concat(n);n.length=0,e.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}),o=null,i=function(n){o||_(!1),o=null,$t(0,(function(){return qt(e().onDragEnd,n,t,q)}))};return{beforeCapture:function(t,n){o&&_(!1),$t(0,(function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})}))},beforeStart:function(t,n){o&&_(!1),$t(0,(function(){var r=e().onBeforeDragStart;r&&r(Wt(t,n))}))},start:function(n,i){o&&_(!1);var a=Wt(n,i);o={mode:i,lastCritical:n,lastLocation:a.source,lastCombine:null},r.add((function(){$t(0,(function(){return qt(e().onDragStart,a,t,$)}))}))},update:function(n,i){var a=be(i),l=he(i);o||_(!1);var s=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(n,o.lastCritical);s&&(o.lastCritical=n);var d,c,g=(c=a,!(null==(d=o.lastLocation)&&null==c||null!=d&&null!=c&&d.droppableId===c.droppableId&&d.index===c.index));g&&(o.lastLocation=a);var p=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(o.lastCombine,l);if(p&&(o.lastCombine=l),s||g||p){var f=u({},Wt(n,o.mode),{combine:l,destination:a});r.add((function(){$t(0,(function(){return qt(e().onDragUpdate,f,t,W)}))}))}},flush:function(){o||_(!1),r.flush()},drop:i,abort:function(){if(o){var e=u({},Wt(o.lastCritical,o.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var o=r.payload.critical;return n.beforeStart(o,r.payload.movementMode),t(r),void n.start(o,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var i=r.payload.completed.result;return n.flush(),t(r),void n.drop(i)}if(t(r),"FLUSH"!==r.type){var a=e.getState();"DRAGGING"===a.phase&&n.update(a.critical,a.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},Yt=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&_(!1),e.dispatch(Pt({completed:r.completed}))}else t(n)}}},Kt=function(e){var t=null,n=null;return function(r){return function(o){if("FLUSH"!==o.type&&"DROP_COMPLETE"!==o.type&&"DROP_ANIMATION_FINISHED"!==o.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(o),"DROP_ANIMATE"===o.type){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame((function(){n=null,t=T(window,[i])}))}}}},Jt=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(Mt({reason:r.reason})))}}}},Qt=g.compose,Zt=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,o=e.styleMarshal,i=e.getResponders,a=e.announce,l=e.autoScroller;return(0,g.createStore)(bt,Qt((0,g.applyMiddleware)((t=o,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(o){if("LIFT"===o.type){var i=o.payload,a=i.id,l=i.clientSelection,s=i.movementMode,u=n();"DROP_ANIMATING"===u.phase&&r(Pt({completed:u.completed})),"IDLE"!==n().phase&&_(!1),r(At()),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:a,movementMode:s}});var d={draggableId:a,scrollOptions:{shouldPublishImmediately:"SNAP"===s}},c=e.startPublishing(d),g=c.critical,p=c.dimensions,f=c.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:g,dimensions:p,clientSelection:l,movementMode:s,viewport:f}})}else t(o)}}}}(n),jt,Yt,Kt,Jt,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var o=t.getState();return"DRAGGING"!==o.phase&&_(!1),void e.start(o)}n(r),e.scroll(t.getState())}}}}(l),Ut,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var o=r.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),Xt(i,a))))},en=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,o=e.width,i=K({x:n,y:t},{x:o,y:r});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},tn=function(){var e=document.documentElement;return e||_(!1),e},nn=function(){var e=tn();return en({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})};function rn(e,t,n){return n.descriptor.id!==t.id&&n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode}var on,an,ln=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},o=null,i=function(){o||(n.collectionStarting(),o=requestAnimationFrame((function(){o=null;var e=r,i=e.additions,a=e.removals,l=e.modified,s=Object.keys(i).map((function(e){return t.draggable.getById(e).getDimension(X)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),u=Object.keys(l).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),d={additions:s,removals:Object.keys(a),modified:u};r={additions:{},removals:{},modified:{}},n.publish(d)})))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],i()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],i()},stop:function(){o&&(cancelAnimationFrame(o),o=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=function(t){n||_(!1);var o=n.critical.draggable;"ADDITION"===t.type&&rn(e,o,t.value)&&r.add(t.value),"REMOVAL"===t.type&&rn(e,o,t.value)&&r.remove(t.value)};return{updateDroppableIsEnabled:function(r,o){e.droppable.exists(r)||_(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:o})},updateDroppableIsCombineEnabled:function(r,o){n&&(e.droppable.exists(r)||_(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:o}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,o){n&&(e.droppable.exists(r)||_(!1),t.updateDroppableScroll({id:r,newScroll:o}))},startPublishing:function(t){n&&_(!1);var r=e.draggable.getById(t.draggableId),i=e.droppable.getById(r.descriptor.droppableId),a={draggable:r.descriptor,droppable:i.descriptor},l=e.subscribe(o);return n={critical:a,unsubscribe:l},function(e){var t,n,r,o,i,a,l,s=e.critical,u=e.scrollOptions,d=e.registry,c=(t=zt(),n=nn(),r=t.y,o=t.x,a=(i=tn()).clientWidth,l=i.clientHeight,{frame:b({top:r,left:o,right:o+a,bottom:r+l}),scroll:{initial:t,current:t,max:n,diff:{value:X,displacement:X}}}),g=c.scroll.current,p=s.droppable,f=d.droppable.getAllByType(p.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(g,u)})),m=d.draggable.getAllByType(s.draggable.type).map((function(e){return e.getDimension(g)}));return{dimensions:{draggables:pe(m),droppables:ge(f)},critical:s,viewport:c}}({critical:a,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),n.unsubscribe(),n=null}}}},sn=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason},un=function(e){window.scrollBy(e.x,e.y)},dn=A((function(e){return fe(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),cn=function(e){return Math.pow(e,2)},gn=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,o=n-t;return 0===o?0:(r-t)/o},pn=360,fn=1200,mn=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,o=e.shouldUseTimeDampening,i=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return 28;if(e===t.startScrollingFrom)return 1;var n=gn({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=28*cn(1-n);return Math.ceil(r)}(t,n);return 0===i?0:o?Math.max(function(e,t){var n=t,r=fn,o=Date.now()-n;if(o>=fn)return e;if(o<pn)return 1;var i=gn({startOfRange:pn,endOfRange:r,current:o}),a=e*cn(i);return Math.ceil(a)}(i,r),1):i},vn=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,o=e.axis,i=e.shouldUseTimeDampening,a=function(e,t){return{startScrollingFrom:.25*e[t.size],maxScrollValueAt:.05*e[t.size]}}(t,o);return n[o.end]<n[o.start]?mn({distanceToEdge:n[o.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:i}):-1*mn({distanceToEdge:n[o.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:i})},bn=ne((function(e){return 0===e?0:e})),hn=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,o=e.center,i=e.shouldUseTimeDampening,a={top:o.y-n.top,right:n.right-o.x,bottom:n.bottom-o.y,left:o.x-n.left},l=vn({container:n,distanceToEdges:a,dragStartTime:t,axis:De,shouldUseTimeDampening:i}),s=vn({container:n,distanceToEdges:a,dragStartTime:t,axis:Oe,shouldUseTimeDampening:i}),u=bn({x:s,y:l});if(J(u,X))return null;var d=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,o=n.height>t.height,i=n.width>t.width;return i||o?i&&o?null:{x:i?0:r.x,y:o?0:r.y}:r}({container:n,subject:r,proposedScroll:u});return d?J(d,X)?null:d:null},yn=ne((function(e){return 0===e?0:e>0?1:-1})),wn=(on=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,n=e.max,r=e.change,o=Y(t,r),i={x:on(o.x,n.x),y:on(o.y,n.y)};return J(i,X)?null:i}),Cn=function(e){var t=e.max,n=e.current,r=e.change,o={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},i=yn(r),a=wn({max:o,current:n,change:i});return!a||0!==i.x&&0===a.x||0!==i.y&&0===a.y},Sn=function(e,t){return Cn({current:e.scroll.current,max:e.scroll.max,change:t})},xn=function(e,t){var n=e.frame;return!!n&&Cn({current:n.scroll.current,max:n.scroll.max,change:t})},In=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,o=e.scrollWindow,i=e.scrollDroppable,a=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var s=function(e){var t=e.viewport,n=e.subject,r=e.center,o=e.shouldUseTimeDampening,i=hn({dragStartTime:e.dragStartTime,container:t.frame,subject:n,center:r,shouldUseTimeDampening:o});return i&&Sn(t,i)?i:null}({dragStartTime:n,viewport:t.viewport,subject:l,center:a,shouldUseTimeDampening:r});if(s)return void o(s)}var u=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var o=r[n];return o.frame?o:null}var i=function(e,t){var n=de(dn(t),(function(t){return t.frame||_(!1),rt(t.frame.pageMarginBox)(e)}));return n}(t,r);return i}({center:a,destination:et(t.impact),droppables:t.dimensions.droppables});if(u){var d=function(e){var t=e.droppable,n=e.subject,r=e.center,o=e.dragStartTime,i=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var l=hn({dragStartTime:o,container:a.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:i});return l&&xn(t,l)?l:null}({dragStartTime:n,droppable:u,subject:l,center:a,shouldUseTimeDampening:r});d&&i(u.descriptor.id,d)}},En=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow;return function(e){var o=e.scrollJumpRequest;if(o){var i=et(e.impact);i||_(!1);var a=function(e,t){if(!xn(e,t))return t;var r=function(e,t){var n=e.frame;return n&&xn(e,t)?wn({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var o=K(t,r);return n(e.descriptor.id,o),K(t,o)}(e.dimensions.droppables[i],o);if(a){var l=e.viewport,s=function(e,t,n){if(!e)return n;if(!Sn(t,n))return n;var o=function(e,t){if(!Sn(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return wn({current:r,max:n,change:t})}(t,n);if(!o)return r(n),null;var i=K(n,o);return r(i),K(n,i)}(e.isWindowScrollAllowed,l,a);s&&function(e,n){var r=Y(e.current.client.selection,n);t({client:r})}(e,s)}}}},Rn=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,o=function(e){var t=e.scrollDroppable,n=P(e.scrollWindow),r=P(t),o=null,i=function(e){o||_(!1);var t=o,i=t.shouldUseTimeDampening,a=t.dragStartTime;In({state:e,scrollWindow:n,scrollDroppable:r,dragStartTime:a,shouldUseTimeDampening:i})};return{start:function(e){o&&_(!1);var t=Date.now(),n=!1,r=function(){n=!0};In({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),o={dragStartTime:t,shouldUseTimeDampening:n},n&&i(e)},stop:function(){o&&(n.cancel(),r.cancel(),o=null)},scroll:i}}({scrollWindow:n,scrollDroppable:t}),i=En({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&i(e):o.scroll(e))},start:o.start,stop:o.stop}},Dn="data-rbd",On={base:an=Dn+"-drag-handle",draggableId:an+"-draggable-id",contextId:an+"-context-id"},An=function(){var e=Dn+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Pn=function(){var e=Dn+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Mn={contextId:Dn+"-scroll-container-context-id"},Fn=function(e,t){return e.map((function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""})).join(" ")},Bn=function(e){var t,n,r,o=(t=e,function(e){return"["+e+'="'+t+'"]'}),i=(n="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:o(On.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:n,dragging:"pointer-events: none;",dropAnimating:n}}),a=[(r="\n      transition: "+kt.outOfTheWay+";\n    ",{selector:o(An.contextId),styles:{dragging:r,dropAnimating:r,userCancel:r}}),i,{selector:o(Pn.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Fn(a,"always"),resting:Fn(a,"resting"),dragging:Fn(a,"dragging"),dropAnimating:Fn(a,"dropAnimating"),userCancel:Fn(a,"userCancel")}},Nn="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect,Tn=function(){var e=document.querySelector("head");return e||_(!1),e},Ln=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t},kn=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Vn(e){return e instanceof kn(e).HTMLElement}function _n(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach((function(t){return t(e)}))}function r(t){return e.draggables[t]||null}function o(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var o=t.descriptor.id,i=r(o);i&&t.uniqueId===i.uniqueId&&(delete e.draggables[o],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||_(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return se(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=o(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=o(e);return t||_(!1),t},findById:o,exists:function(e){return Boolean(o(e))},getAllByType:function(t){return se(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var Gn=a().createContext(null),Hn=function(){var e=document.body;return e||_(!1),e},jn={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},zn=function(e){return"rbd-announcement-"+e},Un=0,$n={separator:"::"};function Wn(e,t){return void 0===t&&(t=$n),m((function(){return""+e+t.separator+Un++}),[t.separator,e])}var qn=a().createContext(null);function Xn(e){var t=(0,i.useRef)(e);return(0,i.useEffect)((function(){t.current=e})),t}var Yn,Kn,Jn=((Yn={})[13]=!0,Yn[9]=!0,Yn),Qn=function(e){Jn[e.keyCode]&&e.preventDefault()},Zn=function(){var e="visibilitychange";return"undefined"==typeof document?e:de([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}(),er={type:"IDLE"};function tr(){}var nr=((Kn={})[34]=!0,Kn[33]=!0,Kn[36]=!0,Kn[35]=!0,Kn);var rr={type:"IDLE"},or={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function ir(e,t){if(null==t)return!1;if(Boolean(or[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&ir(e,t.parentElement)}function ar(e,t){var n=t.target;return!!Vn(n)&&ir(e,n)}var lr=function(e){return b(e.getBoundingClientRect()).center},sr=function(){var e="matches";return"undefined"==typeof document?e:de([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function ur(e,t){return null==e?null:e[sr](t)?e:ur(e.parentElement,t)}function dr(e,t){return e.closest?e.closest(t):ur(e,t)}function cr(e){e.preventDefault()}function gr(e){var t=e.expected,n=e.phase,r=e.isLockActive;return e.shouldWarn,!!r()&&t===n}function pr(e){var t=e.lockAPI,n=e.store,r=e.registry,o=e.draggableId;if(t.isClaimed())return!1;var i=r.draggable.findById(o);return!!i&&!!i.options.isEnabled&&!!sn(n.getState(),o)}var fr=[function(e){var t=(0,i.useRef)(er),n=(0,i.useRef)(N),r=m((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var r=e.findClosestDraggableId(t);if(r){var o=e.tryGetLock(r,l,{sourceEvent:t});if(o){t.preventDefault();var i={x:t.clientX,y:t.clientY};n.current(),d(o,i)}}}}}}),[e]),o=m((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}}),[e]),a=v((function(){n.current=T(window,[o,r],{passive:!1,capture:!0})}),[o,r]),l=v((function(){"IDLE"!==t.current.type&&(t.current=er,n.current(),a())}),[a]),s=v((function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),u=v((function(){var e=function(e){var t=e.cancel,n=e.completed,r=e.getPhase,o=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,i=e.clientY;if(0===t){var a={x:n,y:i},l=r();if("DRAGGING"===l.type)return e.preventDefault(),void l.actions.move(a);if("PENDING"!==l.type&&_(!1),s=l.point,u=a,Math.abs(u.x-s.x)>=5||Math.abs(u.y-s.y)>=5){var s,u;e.preventDefault();var d=l.actions.fluidLift(a);o({type:"DRAGGING",actions:d})}}}},{eventName:"mouseup",fn:function(e){var o=r();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void Qn(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&_(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:Zn,fn:t}]}({cancel:s,completed:l,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=T(window,e,{capture:!0,passive:!1})}),[s,l]),d=v((function(e,n){"IDLE"!==t.current.type&&_(!1),t.current={type:"PENDING",point:n,actions:e},u()}),[u]);Nn((function(){return a(),function(){n.current()}}),[a])},function(e){var t=(0,i.useRef)(tr),n=m((function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&32===n.keyCode){var o=e.findClosestDraggableId(n);if(o){var i=e.tryGetLock(o,s,{sourceEvent:n});if(i){n.preventDefault();var a=!0,l=i.snapLift();t.current(),t.current=T(window,function(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(nr[r.keyCode]?r.preventDefault():Qn(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Zn,fn:n}]}(l,s),{capture:!0,passive:!1})}}}function s(){a||_(!1),a=!1,t.current(),r()}}}}),[e]),r=v((function(){t.current=T(window,[n],{passive:!1,capture:!0})}),[n]);Nn((function(){return r(),function(){t.current()}}),[r])},function(e){var t=(0,i.useRef)(rr),n=(0,i.useRef)(N),r=v((function(){return t.current}),[]),o=v((function(e){t.current=e}),[]),a=m((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var o=e.tryGetLock(r,s,{sourceEvent:t});if(o){var i=t.touches[0],a={x:i.clientX,y:i.clientY};n.current(),g(o,a)}}}}}}),[e]),l=v((function(){n.current=T(window,[a],{capture:!0,passive:!1})}),[a]),s=v((function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),o(rr),n.current(),l())}),[l,o]),u=v((function(){var e=t.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[s]),d=v((function(){var e={capture:!0,passive:!1},t={cancel:u,completed:s,getPhase:r},o=T(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var o=e.touches[0],i={x:o.clientX,y:o.clientY};e.preventDefault(),n.actions.move(i)}else t()}},{eventName:"touchend",fn:function(e){var o=r();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&_(!1);var o=e.touches[0];if(o&&o.force>=.15){var i=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return i?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();i&&t()}}},{eventName:Zn,fn:t}]}(t),e),i=T(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:Zn,fn:t}]}(t),e);n.current=function(){o(),i()}}),[u,r,s]),c=v((function(){var e=r();"PENDING"!==e.type&&_(!1);var t=e.actions.fluidLift(e.point);o({type:"DRAGGING",actions:t,hasMoved:!1})}),[r,o]),g=v((function(e,t){"IDLE"!==r().type&&_(!1);var n=setTimeout(c,120);o({type:"PENDING",point:t,actions:e,longPressTimerId:n}),d()}),[d,r,o,c]);Nn((function(){return l(),function(){n.current();var e=r();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),o(rr))}}),[r,l,o]),Nn((function(){return T(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function mr(e){var t=e.contextId,n=e.store,r=e.registry,o=e.customSensors,a=e.enableDefaultSensors,l=[].concat(a?fr:[],o||[]),s=(0,i.useState)((function(){return function(){var e=null;function t(){e||_(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&_(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],d=v((function(e,t){e.isDragging&&!t.isDragging&&s.tryAbandon()}),[s]);Nn((function(){var e=n.getState();return n.subscribe((function(){var t=n.getState();d(e,t),e=t}))}),[s,n,d]),Nn((function(){return s.tryAbandon}),[s.tryAbandon]);for(var c=v((function(e){return pr({lockAPI:s,registry:r,store:n,draggableId:e})}),[s,r,n]),g=v((function(e,o,i){return function(e){var t=e.lockAPI,n=e.contextId,r=e.store,o=e.registry,i=e.draggableId,a=e.forceSensorStop,l=e.sourceEvent;if(!pr({lockAPI:t,store:r,registry:o,draggableId:i}))return null;var s=o.draggable.getById(i),d=function(e,t){var n="["+An.contextId+'="'+e+'"]',r=de(ce(document.querySelectorAll(n)),(function(e){return e.getAttribute(An.id)===t}));return r&&Vn(r)?r:null}(n,s.descriptor.id);if(!d)return null;if(l&&!s.options.canDragInteractiveElements&&ar(d,l))return null;var c=t.claim(a||N),g="PRE_DRAG";function p(){return s.options.shouldRespectForcePress}function f(){return t.isActive(c)}var m=function(e,t){gr({expected:e,phase:g,isLockActive:f,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function v(e){function n(){t.release(),g="COMPLETED"}function o(t,o){if(void 0===o&&(o={shouldBlockNextClick:!1}),e.cleanup(),o.shouldBlockNextClick){var i=T(window,[{eventName:"click",fn:cr,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(i)}n(),r.dispatch(Mt({reason:t}))}return"PRE_DRAG"!==g&&(n(),"PRE_DRAG"!==g&&_(!1)),r.dispatch(ht(e.liftActionArgs)),g="DRAGGING",u({isActive:function(){return gr({expected:"DRAGGING",phase:g,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(e){return o("DROP",e)},cancel:function(e){return o("CANCEL",e)}},e.actions)}return{isActive:function(){return gr({expected:"PRE_DRAG",phase:g,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:function(e){var t=P((function(e){m((function(){return It({client:e})}))}));return u({},v({liftActionArgs:{id:i,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return m(Et)},moveRight:function(){return m(Dt)},moveDown:function(){return m(Rt)},moveLeft:function(){return m(Ot)}};return v({liftActionArgs:{id:i,clientSelection:lr(d),movementMode:"SNAP"},cleanup:N,actions:e})},abort:function(){gr({expected:"PRE_DRAG",phase:g,isLockActive:f,shouldWarn:!0})&&t.release()}}}({lockAPI:s,registry:r,contextId:t,store:n,draggableId:e,forceSensorStop:o,sourceEvent:i&&i.sourceEvent?i.sourceEvent:null})}),[t,s,r,n]),p=v((function(e){return function(e,t){var n=function(e,t){var n,r=t.target;if(!((n=r)instanceof kn(n).Element))return null;var o=function(e){return"["+On.contextId+'="'+e+'"]'}(e),i=dr(r,o);return i&&Vn(i)?i:null}(e,t);return n?n.getAttribute(On.draggableId):null}(t,e)}),[t]),f=v((function(e){var t=r.draggable.findById(e);return t?t.options:null}),[r.draggable]),b=v((function(){s.isClaimed()&&(s.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch(At()))}),[s,n]),h=v(s.isClaimed,[s]),y=m((function(){return{canGetLock:c,tryGetLock:g,findClosestDraggableId:p,findOptionsForDraggable:f,tryReleaseLock:b,isLockClaimed:h}}),[c,g,p,f,b,h]),w=0;w<l.length;w++)l[w](y)}var vr=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function br(e){return e.current||_(!1),e.current}function hr(e){var t=e.contextId,n=e.setCallbacks,r=e.sensors,o=e.nonce,l=e.dragHandleUsageInstructions,s=(0,i.useRef)(null),d=Xn(e),c=v((function(){return vr(d.current)}),[d]),f=function(e){var t=m((function(){return zn(e)}),[e]),n=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),u(e.style,jn),Hn().appendChild(e),function(){setTimeout((function(){var t=Hn();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)}))}}),[t]),v((function(e){var t=n.current;t&&(t.textContent=e)}),[])}(t),b=function(e){var t=e.contextId,n=e.text,r=Wn("hidden-text",{separator:"-"}),o=m((function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:r}).contextId+"-"+e.uniqueId;var e}),[r,t]);return(0,i.useEffect)((function(){var e=document.createElement("div");return e.id=o,e.textContent=n,e.style.display="none",Hn().appendChild(e),function(){var t=Hn();t.contains(e)&&t.removeChild(e)}}),[o,n]),o}({contextId:t,text:l}),h=function(e,t){var n=m((function(){return Bn(e)}),[e]),r=(0,i.useRef)(null),o=(0,i.useRef)(null),a=v(A((function(e){var t=o.current;t||_(!1),t.textContent=e})),[]),l=v((function(e){var t=r.current;t||_(!1),t.textContent=e}),[]);Nn((function(){(r.current||o.current)&&_(!1);var i=Ln(t),s=Ln(t);return r.current=i,o.current=s,i.setAttribute(Dn+"-always",e),s.setAttribute(Dn+"-dynamic",e),Tn().appendChild(i),Tn().appendChild(s),l(n.always),a(n.resting),function(){var e=function(e){var t=e.current;t||_(!1),Tn().removeChild(t),e.current=null};e(r),e(o)}}),[t,l,a,n.always,n.resting,e]);var s=v((function(){return a(n.dragging)}),[a,n.dragging]),u=v((function(e){a("DROP"!==e?n.userCancel:n.dropAnimating)}),[a,n.dropAnimating,n.userCancel]),d=v((function(){o.current&&a(n.resting)}),[a,n.resting]);return m((function(){return{dragging:s,dropping:u,resting:d}}),[s,u,d])}(t,o),y=v((function(e){br(s).dispatch(e)}),[]),w=m((function(){return(0,g.bindActionCreators)({publishWhileDragging:yt,updateDroppableScroll:Ct,updateDroppableIsEnabled:St,updateDroppableIsCombineEnabled:xt,collectionStarting:wt},y)}),[y]),C=function(){var e=m(_n,[]);return(0,i.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),S=m((function(){return ln(C,w)}),[C,w]),x=m((function(){return Rn(u({scrollWindow:un,scrollDroppable:S.scrollDroppable},(0,g.bindActionCreators)({move:It},y)))}),[S.scrollDroppable,y]),I=function(e){var t=(0,i.useRef)({}),n=(0,i.useRef)(null),r=(0,i.useRef)(null),o=(0,i.useRef)(!1),a=v((function(e,n){var r={id:e,focus:n};return t.current[e]=r,function(){var n=t.current;n[e]!==r&&delete n[e]}}),[]),l=v((function(t){var n=function(e,t){var n="["+On.contextId+'="'+e+'"]',r=ce(document.querySelectorAll(n));if(!r.length)return null;var o=de(r,(function(e){return e.getAttribute(On.draggableId)===t}));return o&&Vn(o)?o:null}(e,t);n&&n!==document.activeElement&&n.focus()}),[e]),s=v((function(e,t){n.current===e&&(n.current=t)}),[]),u=v((function(){r.current||o.current&&(r.current=requestAnimationFrame((function(){r.current=null;var e=n.current;e&&l(e)})))}),[l]),d=v((function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute(On.draggableId)===e&&(n.current=e)}),[]);return Nn((function(){return o.current=!0,function(){o.current=!1;var e=r.current;e&&cancelAnimationFrame(e)}}),[]),m((function(){return{register:a,tryRecordFocus:d,tryRestoreFocusRecorded:u,tryShiftRecord:s}}),[a,d,u,s])}(t),E=m((function(){return Zt({announce:f,autoScroller:x,dimensionMarshal:S,focusMarshal:I,getResponders:c,styleMarshal:h})}),[f,x,S,I,c,h]);s.current=E;var R=v((function(){var e=br(s);"IDLE"!==e.getState().phase&&e.dispatch(At())}),[]),D=v((function(){var e=br(s).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);n(m((function(){return{isDragging:D,tryAbort:R}}),[D,R]));var O=v((function(e){return sn(br(s).getState(),e)}),[]),P=v((function(){return nt(br(s).getState())}),[]),M=m((function(){return{marshal:S,focus:I,contextId:t,canLift:O,isMovementAllowed:P,dragHandleUsageInstructionsId:b,registry:C}}),[t,S,b,I,O,P,C]);return mr({contextId:t,store:E,registry:C,customSensors:r,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,i.useEffect)((function(){return R}),[R]),a().createElement(qn.Provider,{value:M},a().createElement(p.Provider,{context:Gn,store:E},e.children))}var yr=0;function wr(e){var t=m((function(){return""+yr++}),[]),n=e.dragHandleUsageInstructions||"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n";return a().createElement(G,null,(function(r){return a().createElement(hr,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var Cr=function(e){return function(t){return e===t}},Sr=Cr("scroll"),xr=Cr("auto"),Ir=(Cr("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),Er=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Ir(n,Sr)||Ir(n,xr)}(t)?t:e(t.parentElement)},Rr=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Dr=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},Or={passive:!1},Ar={passive:!0},Pr=function(e){return e.shouldPublishImmediately?Or:Ar};function Mr(e){var t=(0,i.useContext)(e);return t||_(!1),t}var Fr=function(e){return e&&e.env.closestScrollable||null};function Br(){}var Nr={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},Tr=a().memo((function(e){var t=(0,i.useRef)(null),n=v((function(){t.current&&(clearTimeout(t.current),t.current=null)}),[]),r=e.animate,o=e.onTransitionEnd,l=e.onClose,s=e.contextId,u=(0,i.useState)("open"===e.animate),d=u[0],c=u[1];(0,i.useEffect)((function(){return d?"open"!==r?(n(),c(!1),Br):t.current?Br:(t.current=setTimeout((function(){t.current=null,c(!1)})),n):Br}),[r,d,n]);var g=v((function(e){"height"===e.propertyName&&(o(),"close"===r&&l())}),[r,l,o]),p=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,o=function(e){var t=e.placeholder;return e.isAnimatingOpenOnMount||"close"===e.animate?Nr:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?kt.placeholder:null}}({isAnimatingOpenOnMount:d,animate:e.animate,placeholder:e.placeholder});return a().createElement(e.placeholder.tagName,{style:p,"data-rbd-placeholder-context-id":s,onTransitionEnd:g,ref:e.innerRef})})),Lr=a().createContext(null),kr=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return s(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(a().PureComponent),Vr=5e3,_r=4500,Gr=function(e,t){return t?kt.drop(t.duration):e?kt.snap:kt.fluid},Hr=function(e,t){return e?t?Bt:Nt:null};function jr(e){e.preventDefault()}var zr=function(e,t){return e===t},Ur=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function $r(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Wr={mapped:{type:"SECONDARY",offset:X,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:$r(null)}},qr={dropAnimationFinished:function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}}},Xr=(0,p.connect)((function(){var e,t,n,r=(e=A((function(e,t){return{x:e,y:t}})),t=A((function(e,t,n,r,o){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(o),dropAnimation:o,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}})),n=A((function(e,n,r,o,i,a,l){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:i,combineWith:a,mode:n,offset:e,dimension:r,forceShouldAnimate:l,snapshot:t(n,o,i,a,null)}}})),function(r,o){if(r.isDragging){if(r.critical.draggable.id!==o.draggableId)return null;var i=r.current.client.offset,a=r.dimensions.draggables[o.draggableId],l=et(r.impact),s=(d=r.impact).at&&"COMBINE"===d.at.type?d.at.combine.draggableId:null,u=r.forceShouldAnimate;return n(e(i.x,i.y),r.movementMode,a,o.isClone,l,s,u)}var d;if("DROP_ANIMATING"===r.phase){var c=r.completed;if(c.result.draggableId!==o.draggableId)return null;var g=o.isClone,p=r.dimensions.draggables[o.draggableId],f=c.result,m=f.mode,v=Ur(f),b=function(e){return e.combine?e.combine.draggableId:null}(f),h={duration:r.dropDuration,curve:Ft,moveTo:r.newHomeClientOffset,opacity:b?Bt:null,scale:b?Tt:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:p,dropping:h,draggingOver:v,combineWith:b,mode:m,forceShouldAnimate:null,snapshot:t(m,g,v,b,h)}}}return null}),o=function(){var e=A((function(e,t){return{x:e,y:t}})),t=A($r),n=A((function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}})),r=function(e){return e?n(X,e,!0):null},o=function(t,o,i,a){var l=i.displaced.visible[t],s=Boolean(a.inVirtualList&&a.effected[t]),u=he(i),d=u&&u.draggableId===t?o:null;if(!l){if(!s)return r(d);if(i.displaced.invisible[t])return null;var c=Q(a.displacedBy.point),g=e(c.x,c.y);return n(g,d,!0)}if(s)return r(d);var p=i.displacedBy.point,f=e(p.x,p.y);return n(f,d,l.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:o(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:o(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(e,t){return r(e,t)||o(e,t)||Wr}}),qr,null,{context:Gn,pure:!0,areStatePropsEqual:zr})((function(e){var t=(0,i.useRef)(null),n=v((function(e){t.current=e}),[]),r=v((function(){return t.current}),[]),o=Mr(qn),a=o.contextId,l=o.dragHandleUsageInstructionsId,s=o.registry,u=Mr(Lr),d=u.type,c=u.droppableId,g=m((function(){return{id:e.draggableId,index:e.index,type:d,droppableId:c}}),[e.draggableId,e.index,d,c]),p=e.children,f=e.draggableId,b=e.isEnabled,h=e.shouldRespectForcePress,y=e.canDragInteractiveElements,w=e.isClone,C=e.mapped,S=e.dropAnimationFinished;w||function(e){var t=Wn("draggable"),n=e.descriptor,r=e.registry,o=e.getDraggableRef,a=e.canDragInteractiveElements,l=e.shouldRespectForcePress,s=e.isEnabled,u=m((function(){return{canDragInteractiveElements:a,shouldRespectForcePress:l,isEnabled:s}}),[a,s,l]),d=v((function(e){var t=o();return t||_(!1),function(e,t,n){void 0===n&&(n=X);var r=window.getComputedStyle(t),o=t.getBoundingClientRect(),i=E(o,r),a=I(i,n);return{descriptor:e,placeholder:{client:i,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:i.marginBox.width,y:i.marginBox.height},client:i,page:a}}(n,t,e)}),[n,o]),c=m((function(){return{uniqueId:t,descriptor:n,options:u,getDimension:d}}),[n,d,u,t]),g=(0,i.useRef)(c),p=(0,i.useRef)(!0);Nn((function(){return r.draggable.register(g.current),function(){return r.draggable.unregister(g.current)}}),[r.draggable]),Nn((function(){if(p.current)p.current=!1;else{var e=g.current;g.current=c,r.draggable.update(c,e)}}),[c,r.draggable])}(m((function(){return{descriptor:g,registry:s,getDraggableRef:r,canDragInteractiveElements:y,shouldRespectForcePress:h,isEnabled:b}}),[g,s,r,y,h,b]));var x=m((function(){return b?{tabIndex:0,role:"button","aria-describedby":l,"data-rbd-drag-handle-draggable-id":f,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:jr}:null}),[a,l,f,b]),R=v((function(e){"DRAGGING"===C.type&&C.dropping&&"transform"===e.propertyName&&S()}),[S,C]),D=m((function(){var e=function(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,n=e.offset,r=e.combineWith,o=e.dropping,i=Boolean(r),a=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(e),l=Boolean(o),s=l?Gt(n,i):_t(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:Gr(a,o),transform:s,opacity:Hr(i,l),zIndex:l?_r:Vr,pointerEvents:"none"}}(e):{transform:_t((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t}(C),t="DRAGGING"===C.type&&C.dropping?R:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":f,style:e,onTransitionEnd:t},dragHandleProps:x}}),[a,x,f,C,R,n]),O=m((function(){return{draggableId:g.id,type:g.type,source:{index:g.index,droppableId:g.droppableId}}}),[g.droppableId,g.id,g.index,g.type]);return p(D,C.snapshot,O)}));function Yr(e){return Mr(Lr).isUsingCloneFor!==e.draggableId||e.isClone?a().createElement(Xr,e):null}function Kr(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),r=Boolean(e.shouldRespectForcePress);return a().createElement(Yr,u({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}var Jr,Qr,Zr=function(e,t){return e===t.droppable.type},eo=function(e,t){return t.draggables[e.draggable.id]},to={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||_(!1),document.body}},no=(0,p.connect)((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=u({},e,{shouldAnimatePlaceholder:!1}),n=A((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),r=A((function(r,o,i,a,l,s){var u=l.descriptor.id;if(l.descriptor.droppableId===r){var d=s?{render:s,dragging:n(l.descriptor)}:null,c={isDraggingOver:i,draggingOverWith:i?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!1,snapshot:c,useClone:d}}if(!o)return t;if(!a)return e;var g={isDraggingOver:i,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!0,snapshot:g,useClone:null}}));return function(n,o){var i=o.droppableId,a=o.type,l=!o.isDropDisabled,s=o.renderClone;if(n.isDragging){var u=n.critical;if(!Zr(a,u))return t;var d=eo(u,n.dimensions),c=et(n.impact)===i;return r(i,l,c,c,d,s)}if("DROP_ANIMATING"===n.phase){var g=n.completed;if(!Zr(a,g.critical))return t;var p=eo(g.critical,n.dimensions);return r(i,l,Ur(g.result)===i,et(g.impact)===i,p,s)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var f=n.completed;if(!Zr(a,f.critical))return t;var m=et(f.impact)===i,v=Boolean(f.impact.at&&"COMBINE"===f.impact.at.type),b=f.critical.droppable.id===i;return m?v?e:t:b?e:t}return t}}),{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:Gn,pure:!0,areStatePropsEqual:zr})((function(e){var t=(0,i.useContext)(qn);t||_(!1);var n=t.contextId,r=t.isMovementAllowed,o=(0,i.useRef)(null),l=(0,i.useRef)(null),s=e.children,u=e.droppableId,d=e.type,c=e.mode,g=e.direction,p=e.ignoreContainerClipping,f=e.isDropDisabled,b=e.isCombineEnabled,y=e.snapshot,w=e.useClone,S=e.updateViewportMaxScroll,x=e.getContainerForClone,E=v((function(){return o.current}),[]),D=v((function(e){o.current=e}),[]),O=(v((function(){return l.current}),[]),v((function(e){l.current=e}),[])),M=v((function(){r()&&S({maxScroll:nn()})}),[r,S]);!function(e){var t=(0,i.useRef)(null),n=Mr(qn),r=Wn("droppable"),o=n.registry,a=n.marshal,l=Xn(e),s=m((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),u=(0,i.useRef)(s),d=m((function(){return A((function(e,n){t.current||_(!1);var r={x:e,y:n};a.updateDroppableScroll(s.id,r)}))}),[s.id,a]),c=v((function(){var e=t.current;return e&&e.env.closestScrollable?Rr(e.env.closestScrollable):X}),[]),g=v((function(){var e=c();d(e.x,e.y)}),[c,d]),p=m((function(){return P(g)}),[g]),f=v((function(){var e=t.current,n=Fr(e);e&&n||_(!1),e.scrollOptions.shouldPublishImmediately?g():p()}),[p,g]),b=v((function(e,r){t.current&&_(!1);var o=l.current,i=o.getDroppableRef();i||_(!1);var a=function(e){return{closestScrollable:Er(e),isFixedOnPage:Dr(e)}}(i),u={ref:i,descriptor:s,env:a,scrollOptions:r};t.current=u;var d=function(e){var t=e.ref,n=e.descriptor,r=e.env,o=e.windowScroll,i=e.direction,a=e.isDropDisabled,l=e.isCombineEnabled,s=e.shouldClipSubject,u=r.closestScrollable,d=function(e,t){var n=R(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,i=r+t.scrollHeight,a=o+t.scrollWidth,l=h({top:r,right:a,bottom:i,left:o},n.border);return C({borderBox:l,margin:n.margin,border:n.border,padding:n.padding})}(t,u),c=I(d,o),g=function(){if(!u)return null;var e=R(u),t={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:e,page:I(e,o),scroll:Rr(u),scrollSize:t,shouldClipSubject:s}}(),p=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,o=e.isFixedOnPage,i=e.direction,a=e.client,l=e.page,s=e.closest,u=function(){if(!s)return null;var e=s.scrollSize,t=s.client,n=en({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:n,diff:{value:X,displacement:X}}}}(),d="vertical"===i?De:Oe;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:o,axis:d,isEnabled:n,client:a,page:l,frame:u,subject:ae({page:l,withPlaceholder:null,axis:d,frame:u})}}({descriptor:n,isEnabled:!a,isCombineEnabled:l,isFixedOnPage:r.isFixedOnPage,direction:i,client:d,page:c,closest:g});return p}({ref:i,descriptor:s,env:a,windowScroll:e,direction:o.direction,isDropDisabled:o.isDropDisabled,isCombineEnabled:o.isCombineEnabled,shouldClipSubject:!o.ignoreContainerClipping}),c=a.closestScrollable;return c&&(c.setAttribute(Mn.contextId,n.contextId),c.addEventListener("scroll",f,Pr(u.scrollOptions))),d}),[n.contextId,s,f,l]),y=v((function(){var e=t.current,n=Fr(e);return e&&n||_(!1),Rr(n)}),[]),w=v((function(){var e=t.current;e||_(!1);var n=Fr(e);t.current=null,n&&(p.cancel(),n.removeAttribute(Mn.contextId),n.removeEventListener("scroll",f,Pr(e.scrollOptions)))}),[f,p]),S=v((function(e){var n=t.current;n||_(!1);var r=Fr(n);r||_(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x}),[]),x=m((function(){return{getDimensionAndWatchScroll:b,getScrollWhileDragging:y,dragStopped:w,scroll:S}}),[w,b,y,S]),E=m((function(){return{uniqueId:r,descriptor:s,callbacks:x}}),[x,s,r]);Nn((function(){return u.current=E.descriptor,o.droppable.register(E),function(){t.current&&w(),o.droppable.unregister(E)}}),[x,s,w,E,a,o.droppable]),Nn((function(){t.current&&a.updateDroppableIsEnabled(u.current.id,!e.isDropDisabled)}),[e.isDropDisabled,a]),Nn((function(){t.current&&a.updateDroppableIsCombineEnabled(u.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,a])}({droppableId:u,type:d,mode:c,direction:g,isDropDisabled:f,isCombineEnabled:b,ignoreContainerClipping:p,getDroppableRef:E});var B=a().createElement(kr,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,r=e.data,o=e.animate;return a().createElement(Tr,{placeholder:r,onClose:t,innerRef:O,animate:o,contextId:n,onTransitionEnd:M})})),N=m((function(){return{innerRef:D,placeholder:B,droppableProps:{"data-rbd-droppable-id":u,"data-rbd-droppable-context-id":n}}}),[n,u,B,D]),T=w?w.dragging.draggableId:null,L=m((function(){return{droppableId:u,type:d,isUsingCloneFor:T}}),[u,T,d]);return a().createElement(Lr.Provider,{value:L},s(N,y),function(){if(!w)return null;var e=w.dragging,t=w.render,n=a().createElement(Yr,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(n,r){return t(n,r,e)}));return F().createPortal(n,x())}())}));no.defaultProps=to,function(e){e.MINIMIZE="minimize",e.TABLE="table",e.BUTTON="button"}(Jr||(Jr={})),function(e){e.QUERY="query",e.ADHOC="adhoc",e.CONSTANT="constant",e.DATASOURCE="datasource",e.INTERVAL="interval",e.TEXTBOX="textbox",e.CUSTOM="custom",e.SYSTEM="system"}(Qr||(Qr={}));const ro=[{value:Jr.TABLE,label:"Table",description:"Full featured table view."},{value:Jr.MINIMIZE,label:"Minimize",description:"Minimized select view."},{value:Jr.BUTTON,label:"Button",description:"Button select view."}],oo=[{value:!0,label:"Display",description:"Display variable Label or Id. Allows to enable filtering."},{value:!1,label:"Hide",description:"Do not display header."}],io=[{value:!0,label:"Enabled",description:"Follow when scrolling."},{value:!1,label:"Disabled",description:"Scroll with dashboard."}],ao=[{value:!0,label:"Enabled",description:"Display Table Filter."},{value:!1,label:"Disabled",description:"Hide Table Filter."}],lo=[{value:!0,label:"Enabled",description:"Always Visible Search."},{value:!1,label:"Disabled",description:"Toggleable Search Visibility."}],so=[{value:!0,label:"Enabled",description:"Allows selecting and filtering favorites."},{value:!1,label:"Disabled",description:"Hide favorites."}],uo=[{value:!0,label:"Enabled",description:"Allows sort by status."},{value:!1,label:"Disabled",description:"Hide sorting."}],co=[{value:!0,label:"Enabled",description:"Display variable names."},{value:!1,label:"Disabled",description:"Hide variable names."}],go=[{value:!0,label:"Enabled",description:"Auto scroll to the first selected value."},{value:!1,label:"Disabled",description:"Disable auto scroll."}],po=[{value:!0,label:"Enabled",description:"Enable to allow group selection."},{value:!1,label:"Disabled",description:"Disable group selection."}],fo=[{value:!0,label:"Enabled",description:"Empty value enabled."},{value:!1,label:"Disabled",description:"Empty value disabled."}],mo=[{value:!0,label:"Enabled",description:"Persistence enabled."},{value:!1,label:"Disabled",description:"Persistence disabled."}],vo="data-testid panel content",bo="data-testid panel info",ho="data-testid panel",yo=e=>`data-testid panel tab-${e}`,wo="data-testid table button-expand",Co="data-testid table button-expand-all",So="data-testid table button-filter",xo="data-testid table button-sort",Io=e=>`data-testid table row-${e}`,Eo=(e,t)=>`data-testid table cell-${t}-${e}`,Ro="data-testid table value-control",Do="data-testid table all-control",Oo="data-testid table favorites-control",Ao="data-testid table favorites-filter",Po="data-testid table field-filter-value",Mo="data-testid table button-clean-filter-value",Fo="data-testid table header",Bo="data-testid table label",No="data-testid fields-editor button-add-new",To="data-testid fields-editor button-remove",Lo="data-testid fields-editor button-start-rename",ko="data-testid fields-editor button-cancel-rename",Vo="data-testid fields-editor button-save-rename",_o="data-testid fields-editor field-name",Go=e=>`data-testid fields-editor item-${e}`,Ho="data-testid fields-editor new-level",jo="data-testid fields-editor new-item-name",zo="data-testid levels-editor button-add-new",Uo="data-testid levels-editor button-remove",$o=e=>`data-testid levels-editor item-${e}`,Wo="data-testid levels-editor new-item",qo="data-testidd levels-editor new-item-name",Xo="data-testid levels-editor",Yo="data-testid minimize-view",Ko="data-testid minimize-view no-variable-message",Jo="options-variable",Qo=e=>`options-variable option-${e}`,Zo="data-testid text-variable",ei="data-testid button-view",ti="data-testid button-view no-variable-message",ni="data-testid button-view no-options-message",ri=e=>`data-testid button-view item-${e}`,oi="All",ii="$__all",ai="$__empty",li=(e,t,n)=>{const r=Array.from(e),[o]=r.splice(t,1);return r.splice(n,0,o),r};function si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){si(e,t,n[t])}))}return e}function di(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const ci=(e,n)=>{t.locationService.partial({[`var-${e}`]:n},!0)},gi=(e,n)=>{if(n)switch(n.type){case Qr.CUSTOM:case Qr.QUERY:{const{name:r,multi:o}=n;if(o){if(e.some((e=>e===ii)))return void ci(r,oi);if(e.some((e=>e===ai)))return void ci(r,"");const o=t.locationService.getSearch().getAll(`var-${r}`).filter((e=>0!==e.toLowerCase().indexOf("all")));if(0===o.length&&!t.locationService.getSearchObject()[`var-${r}`]){const e=n.current.value,t=Array.isArray(e)?e:[e];o.push(...t.filter((e=>e!==ii)))}const i=e.filter((e=>o.includes(e)));if(i.length===e.length)return void ci(r,o.filter((e=>!i.includes(e))));const a=[...new Set(e.concat(o)).values()];return void ci(r,a)}let i=e[0];return i===ii?i=oi:i===ai&&(i=""),void ci(r,i)}case Qr.TEXTBOX:{const t=e[0];return void ci(n.name,t)}default:return}},pi=e=>!!e&&(e.type===Qr.CUSTOM||e.type===Qr.QUERY),fi=e=>e.reduce(((e,t)=>{const n=(e=>{if(e.type===Qr.TEXTBOX)return e;if(e.type===Qr.CUSTOM||e.type===Qr.QUERY){const t=di(ui({},e),{type:Qr.CUSTOM,optionIndexByName:e.options.reduce(((e,t,n)=>(e.set(t.value,n),e)),new Map),helpers:{getOption:e=>t.options[t.optionIndexByName.get(e)]}});return t}})(t);return n?di(ui({},e),{[n.name]:n}):e}),{}),mi=e=>{var t;return!!pi(e)&&(Array.isArray(e.current.value)?e.includeAll?!!(null===(t=e.helpers.getOption(ii))||void 0===t?void 0:t.selected)||e.current.value.length===e.options.length-1:e.current.value.length===e.options.length:e.current.value===ii)},vi=({previousValues:e,value:t,emptyValueEnabled:n,variable:r})=>{const o=Array.isArray(t)?t:[t];if(e.length>o.length){if(0===o.length&&n)return void gi([ai],r);if(0===o.length&&(null==r?void 0:r.multi)&&r.includeAll)return void gi([ii],r);const t=e.filter((e=>!o.includes(e)));gi(t,r)}else o.length>1&&e.includes(ii)&&o.includes(ii)?gi(o.filter((e=>e!==ii)),r):o.length>1&&!e.includes(ii)&&o.includes(ii)?gi([ii],r):gi(o,r)};function bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){bi(e,t,n[t])}))}return e}function yi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const wi=(e,t,n)=>e.reduce(((e,n)=>{const r=t(n);return Array.isArray(r)?e.push(...r):e.push(r),e}),[...n]),Ci=(e,t,n)=>{const r=t[0];return 1===t.length?e.map((e=>n(e,r))).filter((e=>e.selectable)):Array.from(((e,t)=>(null==e?void 0:e.reduce(((e,n)=>{const r=n[t],o=e.get(r);return e.set(r,o?o.concat(n):[n]),e}),new Map))||new Map)(e,r),(([e,o])=>{const i=Ci(o,t.slice(1),n),a=n({[r]:e},r,i);return yi(hi({},a),{childValues:wi(i,(e=>e.childValues||e.label),a.childValues||[]),childFavoritesCount:i.reduce(((e,t)=>e+(t.childFavoritesCount||t.isFavorite?1:0)),a.childFavoritesCount||0),children:i})})).filter((e=>{var t;return(null===(t=e.childValues)||void 0===t?void 0:t.length)||e.selectable}))},Si=(e,{status:t,children:n,isSelectedAll:r,favoritesEnabled:o,groupSelection:i})=>{const a=!!n&&!n.some((e=>!e.selected));let l=!1;pi(e.variable)&&(!n||i&&n.length)&&(l=!!e.variable.helpers.getOption(e.value));const s=o&&!n&&e.value!==ii;return{value:e.value,selected:!!l&&(r||e.selected||a),showStatus:t.exist,statusColor:t.exist?t.color:void 0,variable:e.variable,selectable:l,canBeFavorite:s,isFavorite:s?e.isFavorite:void 0,name:e.name,status:t.exist?t.value:void 0,label:e.label}},xi=(e,t)=>e.filter((e=>{var n;return null===(n=e.childValues)||void 0===n?void 0:n.some((e=>t.includes(e)))})).filter((e=>!!e.children&&xi(e.children,t))),Ii=(e,t=[],n=0)=>e.reduce(((e,t)=>{const r=e[n]||{variable:void 0,values:[],selectable:!1};r.variable=t.variable,r.values.push(t.value),r.selectable=t.selectable;const o=e[n]?e:e.concat(r);return t.children?Ii(t.children,o,n+1):o}),t),Ei=(e,t,n)=>{const r=n.toLowerCase();return e.original.childValues?e.original.childValues.some((e=>e.toLowerCase().includes(r))):e.original.label.toLowerCase().includes(r)},Ri=(e,t)=>{const n=void 0!==e.original.status?e.original.status:0,r=void 0!==t.original.status?t.original.status:0;return n===r?0:n>r?1:-1},Di=(e,t,n)=>!n||(e.original.childValues?(e.original.childFavoritesCount||0)>0:!!e.original.isFavorite);function Oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Oi(e,t,n[t])}))}return e}function Pi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const Mi=(e,t,n)=>Ai({marginLeft:4*n},t),Fi=({items:e,name:t,onChange:o,data:l})=>{const s=(b=(0,r.useTheme2)(),{header:n.css`
      padding: ${b.spacing(.5,.5)};
      border-radius: ${null===(h=b.shape.radius)||void 0===h?void 0:h.default};
      background: ${b.colors.background.secondary};
      min-height: ${b.spacing(4)};
      display: grid;
      grid-template-columns: minmax(100px, max-content) min-content;
      align-items: center;
      justify-content: space-between;
      white-space: nowrap;

      &:focus {
        outline: none;
      }
    `,column:n.css`
      display: flex;
      align-items: center;
    `,dragHandle:n.css`
      display: flex;
      margin: ${b.spacing(0,.5)};
    `,dragIcon:n.css`
      cursor: grab;
      color: ${b.colors.text.disabled};
      &:hover {
        color: ${b.colors.text};
      }
    `,collapseIcon:n.css`
      margin-left: ${b.spacing(.5)};
      color: ${b.colors.text.disabled};
    `,titleWrapper:n.css`
      display: flex;
      align-items: center;
      flex-grow: 1;
      cursor: pointer;
      overflow: hidden;
      margin-right: ${b.spacing(.5)};
    `,title:n.css`
      font-weight: ${b.typography.fontWeightBold};
      color: ${b.colors.text.secondary};
      margin-left: ${b.spacing(.5)};
      overflow: hidden;
      text-overflow: ellipsis;
    `,item:n.css`
      margin-bottom: ${b.spacing(1)};
    `}),[u,d]=(0,i.useState)(e),[c,g]=(0,i.useState)(null),p=(0,i.useCallback)((e=>{d(e),o({name:t,items:e})}),[t,o]),f=(0,i.useCallback)((e=>{e.destination&&p(li(u,e.source.index,e.destination.index))}),[u,p]),m=(0,i.useMemo)((()=>{const e=u[u.length-1];if(e){const t=l.findIndex(((t,n)=>void 0===t.refId?n===e.source:t.refId===e.source)),n=l[t];if(n)return n.fields.map((({name:e})=>{var r;return{label:e,source:null!==(r=n.refId)&&void 0!==r?r:t,value:e,fieldName:e}})).filter((e=>!u.some((t=>t.name===e.value))))||[]}return l.reduce(((e,t,n)=>e.concat(t.fields.map((e=>{const r=t.refId||n;return{value:`${r}:${e.name}`,fieldName:e.name,label:`${r}:${e.name}`,source:r}})))),[])}),[l,u]),v=(0,i.useCallback)((()=>{c&&(p([...u,{name:c.name,source:c.source}]),g(null))}),[u,c,p]);var b,h;return a().createElement("div",{"data-testid":Xo},a().createElement(wr,{onDragEnd:f},a().createElement(no,{droppableId:t},(e=>a().createElement("div",Pi(Ai({},e.droppableProps),{ref:e.innerRef}),u.map(((e,t)=>a().createElement(Kr,{key:e.name,draggableId:e.name,index:t},((o,i)=>a().createElement("div",Pi(Ai({ref:o.innerRef},o.draggableProps,o.dragHandleProps),{style:Mi(i.isDragging,o.draggableProps.style,t),className:s.item,"data-testid":$o(e.name)}),a().createElement("div",{className:s.header},a().createElement("div",{className:s.column},e.name&&a().createElement("div",{className:s.titleWrapper},a().createElement("div",{className:(0,n.cx)(s.title)},e.name))),a().createElement("div",{className:s.column},a().createElement(r.IconButton,{name:"trash-alt",onClick:()=>p(u.filter((t=>t.name!==e.name))),"aria-label":"Remove","data-testid":Uo}),a().createElement("div",Ai({className:s.dragHandle},o.dragHandleProps),a().createElement(r.Icon,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:s.dragIcon}))))))))),e.placeholder)))),a().createElement(r.InlineFieldRow,{"data-testid":Wo},a().createElement(r.InlineField,{label:"New Level",grow:!0},a().createElement(r.Select,{options:m,value:(null==c?void 0:c.value)||null,"aria-label":qo,onChange:e=>{g({value:e.value,source:e.source,name:e.fieldName})}})),a().createElement(r.Button,{icon:"plus",title:"Add Level",disabled:!c,onClick:v,"data-testid":zo},"Add")))};function Bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Bi(e,t,n[t])}))}return e}function Ti(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const Li=({context:{options:e,data:t},onChange:l})=>{const s=(O=(0,r.useTheme2)(),{newGroup:n.css`
      margin: ${O.spacing(2)} 0;
    `,group:n.css`
      margin-bottom: ${O.spacing(1)};
    `,groupHeader:n.css`
      min-height: ${O.spacing(4)};
      padding: ${O.spacing(.5)};
    `,groupHeaderForm:n.css`
      display: flex;
      align-items: center;
      gap: ${O.spacing(.5)};
    `,groupHeaderText:n.css`
      overflow: hidden;
      text-overflow: ellipsis;
      line-height: ${O.spacing(4)};
    `,fieldName:n.css`
      margin: 0;
    `,dragHandle:n.css`
      display: flex;
      margin: ${O.spacing(0,.5)};
    `,dragIcon:n.css`
      cursor: grab;
      color: ${O.colors.text.disabled};
      &:hover {
        color: ${O.colors.text};
      }
    `,actionButton:n.css`
      color: ${O.colors.text.secondary};
    `}),[u,d]=(0,i.useState)((null==e?void 0:e.groups)||[]),[c,g]=(0,i.useState)(""),[p,f]=(0,i.useState)({}),[m,v]=(0,i.useState)(""),[b,h]=(0,i.useState)(""),y=(0,i.useCallback)((e=>{d(e),l(e)}),[l]),w=(0,i.useCallback)((e=>{e.destination&&y(li(u,e.source.index,e.destination.index))}),[u,y]),C=(0,i.useCallback)((e=>{f((t=>Ti(Ni({},t),{[e]:!t[e]})))}),[]),S=(0,i.useCallback)((()=>{g(""),y(u.concat([{name:c,items:[]}])),C(c)}),[u,c,y,C]),x=(0,i.useCallback)((e=>{y(u.map((t=>t.name===e.name?e:t)))}),[u,y]),I=(0,i.useMemo)((()=>u.some((e=>e.name===c))),[u,c]),E=(0,i.useCallback)((()=>{v(""),h(""),f((e=>Ti(Ni({},e),{[m]:!!e[m]&&m===b,[b]:e[m]})))}),[m,b]),R=(0,i.useMemo)((()=>!(!b.trim()||m!==b&&u.some((e=>e.name===b)))),[m,b,u]),D=(0,i.useCallback)((()=>{y(u.map((e=>e.name===m?Ti(Ni({},e),{name:b}):e))),E()}),[u,y,E,m,b]);var O;return a().createElement(a().Fragment,null,a().createElement(wr,{onDragEnd:w},a().createElement(no,{droppableId:"groups-editor"},(e=>a().createElement("div",Ti(Ni({},e.droppableProps),{ref:e.innerRef}),u.map((({name:e,items:i},l)=>a().createElement(Kr,{key:e,draggableId:e,index:l},((l,d)=>{return a().createElement("div",Ti(Ni({ref:l.innerRef},l.draggableProps),{style:(d.isDragging,c=l.draggableProps.style,Ni({},c)),className:s.group}),a().createElement(o.U,{key:e,title:m===e?a().createElement("div",{className:(0,n.cx)(s.groupHeader,s.groupHeaderForm),onClick:e=>e.stopPropagation()},a().createElement(r.InlineField,{className:s.fieldName,invalid:!R},a().createElement(r.Input,{autoFocus:!0,value:b,onChange:e=>h(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&R&&D(),"Escape"===e.key&&E()},"data-testid":_o})),a().createElement(r.Button,{variant:"secondary",fill:"text",className:s.actionButton,icon:"times",size:"sm",onClick:E,"data-testid":ko}),a().createElement(r.Button,{variant:"secondary",fill:"text",className:s.actionButton,icon:"save",size:"sm",onClick:D,disabled:!R,tooltip:R?"":"Name is empty or group with the same name already exists.","data-testid":Vo})):a().createElement("div",{className:(0,n.cx)(s.groupHeader,s.groupHeaderText)},e),headerTestId:Go(e),actions:a().createElement(a().Fragment,null,m!==e&&a().createElement(r.Button,{icon:"edit",variant:"secondary",fill:"text",size:"sm",className:s.actionButton,onClick:()=>{h(e),v(e)},"data-testid":Lo}),a().createElement(r.Button,{icon:"trash-alt",variant:"secondary",fill:"text",size:"sm",className:s.actionButton,onClick:()=>{y(u.filter((t=>t.name!==e)))},"data-testid":To}),a().createElement("div",Ni({className:s.dragHandle},l.dragHandleProps),a().createElement(r.Icon,{name:"draggabledots",className:s.dragIcon}))),isOpen:p[e],onToggle:()=>C(e)},a().createElement(Fi,{name:e,items:i,data:t,onChange:x})));var c})))),e.placeholder)))),a().createElement(r.InlineFieldRow,{className:s.newGroup,"data-testid":Ho},a().createElement(r.InlineField,{label:"New Group",grow:!0,invalid:I,error:"Group with the same name already exists."},a().createElement(r.Input,{placeholder:"Unique name",value:c,onChange:e=>g(e.currentTarget.value),"data-testid":jo})),a().createElement(r.Button,{icon:"plus",title:"Add Group",disabled:!c||I,onClick:S,"data-testid":No},"Add")))},ki=(e,n)=>{const[r,o]=(0,i.useState)({}),[a,l]=(0,i.useState)();(0,i.useEffect)((()=>{o(fi((0,t.getTemplateSrv)().getVariables()));const n=e.getStream(t.RefreshEvent).subscribe((()=>{o(fi((0,t.getTemplateSrv)().getVariables()))}));return()=>{n.unsubscribe()}}),[e]);const s=(0,i.useCallback)((e=>r[e]||void 0),[r]);return(0,i.useEffect)((()=>{l(s(n))}),[s,n]),{variable:a,getVariable:s}},Vi=e=>{const t=`var-${e}`;return(0,i.useMemo)((()=>({save:e=>{sessionStorage.setItem(t,JSON.stringify(e))},get:()=>{const e=sessionStorage.getItem(t);return e?JSON.parse(e):[]},remove:()=>sessionStorage.removeItem(t)})),[t])},_i=({data:t,name:n,status:r})=>{const o=(0,i.useMemo)((()=>{var r,o;return null===(o=t.series.map((t=>t.fields.find((t=>t.type===e.FieldType.string&&(!n||t.name===n))))).find((e=>null==e?void 0:e.values)))||void 0===o||null===(r=o.values)||void 0===r?void 0:r.toArray()}),[t.series,n]),a=(0,i.useMemo)((()=>t.series.map((t=>t.fields.find((t=>t.type===e.FieldType.number&&(!r||t.name===r))))).find((e=>null==e?void 0:e.values))),[t.series,r]);return(0,i.useCallback)((e=>{const t=null==o?void 0:o.findIndex((t=>t===e)),n=void 0!==t&&t>=0;if(n){var r;const e=null==a?void 0:a.values.get(t),o=null==a||null===(r=a.display)||void 0===r?void 0:r.call(a,e);return void 0===e||void 0===o?{exist:!1}:{exist:n,value:e,color:o.color||""}}return{exist:n}}),[o,a])},Gi=e=>({wrapper:n.css`
      position: relative;
    `,content:n.css`
      position: absolute;
      overflow: auto;
    `,header:n.css`
      position: sticky;
      top: 0;
      background-color: ${e.colors.background.primary};
    `,rowContent:n.css`
      display: flex;
      justify-content: stretch;
      align-items: center;
    `,expandButton:n.css`
      margin-right: ${e.spacing(1)};
    `,label:n.css`
      display: flex;
      align-items: center;
      cursor: pointer;
      flex: auto;
      word-break: break-all;
    `,selectControl:n.css`
      vertical-align: middle;
      margin-right: ${e.spacing(1)};
    `,status:n.css`
      display: block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: ${e.spacing(1)};
      flex: none;
    `}),Hi=({variable:e})=>{var t;const[n,o]=(0,i.useState)((null===(t=e.current.value)||void 0===t?void 0:t.toString())||"");(0,i.useEffect)((()=>{var t;o((null===(t=e.current.value)||void 0===t?void 0:t.toString())||"")}),[e]);const l=(0,i.useCallback)((e=>{o(e.target.value)}),[]),s=(0,i.useCallback)((()=>{gi([n],e)}),[n,e]),u=(0,i.useCallback)((e=>{"Enter"===e.key&&s(),"Escape"===e.key&&e.currentTarget.blur()}),[s]);return a().createElement(r.Input,{"data-testid":Zo,onChange:l,onBlur:s,onKeyDown:u,value:n,placeholder:"Enter variable value"})};function ji(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function zi(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ji(i,r,o,a,l,"next",e)}function l(e){ji(i,r,o,a,l,"throw",e)}a(void 0)}))}}function Ui(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ui(e,t,n[t])}))}return e}function Wi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const qi=()=>{const e=(0,i.useCallback)(zi((function*(){const e=window.localStorage.getItem("favorites");return JSON.parse(e||"{}")})),[]),t=(0,i.useCallback)((n=zi((function*(e){return window.localStorage.setItem("favorites",JSON.stringify(e)),e})),function(e){return n.apply(this,arguments)}),[]);var n;return(0,i.useMemo)((()=>({get:e,update:t})),[e,t])},Xi=()=>{const[e,t]=(0,i.useState)({}),n=qi(),r=(0,i.useCallback)(zi((function*(){const e=yield n.get();t(e)})),[n]),o=(0,i.useCallback)((a=zi((function*(r,o){if(!r)return;const i=yield n.update(Wi($i({},e),{[r]:e[r]?e[r].concat([o]):[o]}));t(i)})),function(e,t){return a.apply(this,arguments)}),[e,n]);var a;const l=(0,i.useCallback)(function(){var r=zi((function*(r,o){if(!r)return;const i=yield n.update(Wi($i({},e),{[r]:e[r]?e[r].filter((e=>e!==o)):[]}));t(i)}));return function(e,t){return r.apply(this,arguments)}}(),[e,n]),s=(0,i.useCallback)(((t,n)=>!(!t||!e[t])&&e[t].includes(n)),[e]);return(0,i.useEffect)((()=>{r()}),[r]),(0,i.useMemo)((()=>({add:o,remove:l,isAdded:s})),[o,s,l])},Yi=e=>({root:n.css`
      display: flex;
      gap: ${e.spacing(.5)};
      flex-wrap: wrap;
    `}),Ki=({data:e,options:{variable:t,padding:o=0,status:l,name:s,emptyValue:u=!1,persistent:d=!1}={},eventBus:c})=>{const g=(0,r.useStyles2)(Yi),p=(0,r.useTheme2)(),{variable:f}=ki(c,t||""),m=Vi(null!=t?t:""),v=(0,i.useMemo)((()=>pi(f)?null==f?void 0:f.options.filter((e=>e.selected)).map((e=>e.value)):[]),[f]),b=_i({data:e,name:s,status:l});return f?pi(f)&&f.options.length?a().createElement("div",{className:(0,n.cx)(g.root,n.css`
          padding: ${o}px;
        `),"data-testid":ei},f.options.map((e=>{const t=e.value===ii?oi:e.value,n=b(t),o=e.selected?n.exist?n.color:p.colors.background.secondary:p.colors.background.primary;return a().createElement(r.Button,{key:t,variant:"secondary",fill:"outline",style:{borderColor:n.exist?n.color:"",backgroundColor:o,color:p.colors.getContrastText(o)},onClick:()=>{let t=e.value;f.multi&&(t=e.selected?null==v?void 0:v.filter((t=>t!==e.value)):[...v,e.value]),d&&m.remove(),vi({previousValues:v,variable:f,emptyValueEnabled:u,value:t})},"data-testid":ri(t)},e.text.toString())}))):a().createElement(r.Alert,{severity:"info",title:"Variable","data-testid":ni},"Options are not available."):a().createElement(r.Alert,{severity:"info",title:"Variable","data-testid":ti},"Variable is not selected.")},Ji=({variable:e,emptyValue:t,persistent:n})=>{const o=Vi(e.name),l=(0,i.useMemo)((()=>e.options.filter((e=>e.selected)).map((e=>e.value))),[e]),s=(0,i.useCallback)((r=>{n&&o.remove(),vi({previousValues:l,value:Array.isArray(r)?r.map((e=>e.value)):r.value||"",variable:e,emptyValueEnabled:t})}),[t,n,o,l,e]),u=(0,i.useMemo)((()=>e.options.map((e=>({label:e.text,value:e.value,ariaLabel:Qo(e.value)})))),[e.options]);return a().createElement(r.Select,{"aria-label":Jo,onChange:s,options:u,isMulti:e.multi,value:e.multi?l:l[0]||null})},Qi=({options:{variable:e,padding:t=0,emptyValue:o=!1,persistent:i=!1}={},eventBus:l,width:s})=>{const{variable:u}=ki(l,e||"");if(!u)return a().createElement(r.Alert,{severity:"info",title:"Variable","data-testid":Ko},"Variable is not selected.");const d=s-80-2*t;return a().createElement("div",{className:n.css`
        padding: ${t}px;
      `,"data-testid":Yo},a().createElement(r.InlineField,{grow:!0,label:u.label||u.name,labelWidth:10},a().createElement(a().Fragment,null,(u.type===Qr.QUERY||u.type===Qr.CUSTOM)&&a().createElement("div",{style:{maxWidth:d}},a().createElement(Ji,{variable:u,emptyValue:o,persistent:i})),u.type===Qr.TEXTBOX&&a().createElement(Hi,{variable:u}))))};function Zi(e,t){return"function"==typeof e?e(t):e}function ea(e,t){return n=>{t.setState((t=>({...t,[e]:Zi(n,t[e])})))}}function ta(e){return e instanceof Function}function na(e,t,n){let r,o=[];return()=>{let i;n.key&&n.debug&&(i=Date.now());const a=e();if(a.length===o.length&&!a.some(((e,t)=>o[t]!==e)))return r;let l;if(o=a,n.key&&n.debug&&(l=Date.now()),r=t(...a),null==n||null==n.onChange||n.onChange(r),n.key&&n.debug&&null!=n&&n.debug()){const e=Math.round(100*(Date.now()-i))/100,t=Math.round(100*(Date.now()-l))/100,r=t/16,o=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%c ${o(t,5)} /${o(e,5)} ms`,`\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(0,Math.min(120-120*r,120))}deg 100% 31%);`,null==n?void 0:n.key)}return r}}function ra(e,t,n){var r;let o={id:null!=(r=n.id)?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(o),e},getContext:()=>({table:e,header:o,column:t})};return e._features.forEach((t=>{Object.assign(o,null==t.createHeader?void 0:t.createHeader(o,e))})),o}const oa={createTable:e=>({getHeaderGroups:na((()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right]),((t,n,r,o)=>{var i,a;const l=null!=(i=null==r?void 0:r.map((e=>n.find((t=>t.id===e)))).filter(Boolean))?i:[],s=null!=(a=null==o?void 0:o.map((e=>n.find((t=>t.id===e)))).filter(Boolean))?a:[];return ia(t,[...l,...n.filter((e=>!(null!=r&&r.includes(e.id)||null!=o&&o.includes(e.id)))),...s],e)}),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getCenterHeaderGroups:na((()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right]),((t,n,r,o)=>ia(t,n=n.filter((e=>!(null!=r&&r.includes(e.id)||null!=o&&o.includes(e.id)))),e,"center")),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getLeftHeaderGroups:na((()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left]),((t,n,r)=>{var o;return ia(t,null!=(o=null==r?void 0:r.map((e=>n.find((t=>t.id===e)))).filter(Boolean))?o:[],e,"left")}),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getRightHeaderGroups:na((()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right]),((t,n,r)=>{var o;return ia(t,null!=(o=null==r?void 0:r.map((e=>n.find((t=>t.id===e)))).filter(Boolean))?o:[],e,"right")}),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getFooterGroups:na((()=>[e.getHeaderGroups()]),(e=>[...e].reverse()),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getLeftFooterGroups:na((()=>[e.getLeftHeaderGroups()]),(e=>[...e].reverse()),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getCenterFooterGroups:na((()=>[e.getCenterHeaderGroups()]),(e=>[...e].reverse()),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getRightFooterGroups:na((()=>[e.getRightHeaderGroups()]),(e=>[...e].reverse()),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getFlatHeaders:na((()=>[e.getHeaderGroups()]),(e=>e.map((e=>e.headers)).flat()),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getLeftFlatHeaders:na((()=>[e.getLeftHeaderGroups()]),(e=>e.map((e=>e.headers)).flat()),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getCenterFlatHeaders:na((()=>[e.getCenterHeaderGroups()]),(e=>e.map((e=>e.headers)).flat()),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getRightFlatHeaders:na((()=>[e.getRightHeaderGroups()]),(e=>e.map((e=>e.headers)).flat()),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getCenterLeafHeaders:na((()=>[e.getCenterFlatHeaders()]),(e=>e.filter((e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}))),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getLeftLeafHeaders:na((()=>[e.getLeftFlatHeaders()]),(e=>e.filter((e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}))),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getRightLeafHeaders:na((()=>[e.getRightFlatHeaders()]),(e=>e.filter((e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}))),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}}),getLeafHeaders:na((()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()]),((e,t,n)=>{var r,o,i,a,l,s;return[...null!=(r=null==(o=e[0])?void 0:o.headers)?r:[],...null!=(i=null==(a=t[0])?void 0:a.headers)?i:[],...null!=(l=null==(s=n[0])?void 0:s.headers)?l:[]].map((e=>e.getLeafHeaders())).flat()}),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugHeaders}})})};function ia(e,t,n,r){var o,i;let a=0;const l=function(e,t){void 0===t&&(t=1),a=Math.max(a,t),e.filter((e=>e.getIsVisible())).forEach((e=>{var n;null!=(n=e.columns)&&n.length&&l(e.columns,t+1)}),0)};l(e);let s=[];const u=(e,t)=>{const o={depth:t,id:[r,`${t}`].filter(Boolean).join("_"),headers:[]},i=[];e.forEach((e=>{const a=[...i].reverse()[0];let l,s=!1;if(e.column.depth===o.depth&&e.column.parent?l=e.column.parent:(l=e.column,s=!0),a&&(null==a?void 0:a.column)===l)a.subHeaders.push(e);else{const o=ra(n,l,{id:[r,t,l.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:s,placeholderId:s?`${i.filter((e=>e.column===l)).length}`:void 0,depth:t,index:i.length});o.subHeaders.push(e),i.push(o)}o.headers.push(e),e.headerGroup=o})),s.push(o),t>0&&u(i,t-1)},d=t.map(((e,t)=>ra(n,e,{depth:a,index:t})));u(d,a-1),s.reverse();const c=e=>e.filter((e=>e.column.getIsVisible())).map((e=>{let t=0,n=0,r=[0];return e.subHeaders&&e.subHeaders.length?(r=[],c(e.subHeaders).forEach((e=>{let{colSpan:n,rowSpan:o}=e;t+=n,r.push(o)}))):t=1,n+=Math.min(...r),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}}));return c(null!=(o=null==(i=s[0])?void 0:i.headers)?o:[]),s}const aa={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},la={getDefaultColumnDef:()=>aa,getInitialState:e=>({columnSizing:{},columnSizingInfo:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]},...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",onColumnSizingChange:ea("columnSizing",e),onColumnSizingInfoChange:ea("columnSizingInfo",e)}),createColumn:(e,t)=>({getSize:()=>{var n,r,o;const i=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:aa.minSize,null!=(r=null!=i?i:e.columnDef.size)?r:aa.size),null!=(o=e.columnDef.maxSize)?o:aa.maxSize)},getStart:n=>{const r=n?"left"===n?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns(),o=r.findIndex((t=>t.id===e.id));if(o>0){const e=r[o-1];return e.getStart(n)+e.getSize()}return 0},resetSize:()=>{t.setColumnSizing((t=>{let{[e.id]:n,...r}=t;return r}))},getCanResize:()=>{var n,r;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(r=t.options.enableColumnResizing)||r)},getIsResizing:()=>t.getState().columnSizingInfo.isResizingColumn===e.id}),createHeader:(e,t)=>({getSize:()=>{let t=0;const n=e=>{var r;e.subHeaders.length?e.subHeaders.forEach(n):t+=null!=(r=e.column.getSize())?r:0};return n(e),t},getStart:()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},getResizeHandler:()=>{const n=t.getColumn(e.column.id),r=null==n?void 0:n.getCanResize();return o=>{if(!n||!r)return;if(null==o.persist||o.persist(),ua(o)&&o.touches&&o.touches.length>1)return;const i=e.getSize(),a=e?e.getLeafHeaders().map((e=>[e.column.id,e.column.getSize()])):[[n.id,n.getSize()]],l=ua(o)?Math.round(o.touches[0].clientX):o.clientX,s={},u=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo((e=>{var t,r;const o=n-(null!=(t=null==e?void 0:e.startOffset)?t:0),i=Math.max(o/(null!=(r=null==e?void 0:e.startSize)?r:0),-.999999);return e.columnSizingStart.forEach((e=>{let[t,n]=e;s[t]=Math.round(100*Math.max(n+n*i,0))/100})),{...e,deltaOffset:o,deltaPercentage:i}})),"onChange"!==t.options.columnResizeMode&&"end"!==e||t.setColumnSizing((e=>({...e,...s}))))},d=e=>u("move",e),c=e=>{u("end",e),t.setColumnSizingInfo((e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]})))},g={moveHandler:e=>d(e.clientX),upHandler:e=>{document.removeEventListener("mousemove",g.moveHandler),document.removeEventListener("mouseup",g.upHandler),c(e.clientX)}},p={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),d(e.touches[0].clientX),!1),upHandler:e=>{var t;document.removeEventListener("touchmove",p.moveHandler),document.removeEventListener("touchend",p.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),c(null==(t=e.touches[0])?void 0:t.clientX)}},f=!!function(){if("boolean"==typeof sa)return sa;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch(t){e=!1}return sa=e,sa}()&&{passive:!1};ua(o)?(document.addEventListener("touchmove",p.moveHandler,f),document.addEventListener("touchend",p.upHandler,f)):(document.addEventListener("mousemove",g.moveHandler,f),document.addEventListener("mouseup",g.upHandler,f)),t.setColumnSizingInfo((e=>({...e,startOffset:l,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:n.id})))}}}),createTable:e=>({setColumnSizing:t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),setColumnSizingInfo:t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),resetColumnSizing:t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},resetHeaderSizeInfo:t=>{var n;e.setColumnSizingInfo(t?{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}:null!=(n=e.initialState.columnSizingInfo)?n:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]})},getTotalSize:()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce(((e,t)=>e+t.getSize()),0))?t:0},getLeftTotalSize:()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce(((e,t)=>e+t.getSize()),0))?t:0},getCenterTotalSize:()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce(((e,t)=>e+t.getSize()),0))?t:0},getRightTotalSize:()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce(((e,t)=>e+t.getSize()),0))?t:0}})};let sa=null;function ua(e){return"touchstart"===e.type}const da={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:ea("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;return{_autoResetExpanded:()=>{var r,o;if(t){if(null!=(r=null!=(o=e.options.autoResetAll)?o:e.options.autoResetExpanded)?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue((()=>{e.resetExpanded(),n=!1}))}}else e._queue((()=>{t=!0}))},setExpanded:t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),toggleAllRowsExpanded:t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},resetExpanded:t=>{var n,r;e.setExpanded(t?{}:null!=(n=null==(r=e.initialState)?void 0:r.expanded)?n:{})},getCanSomeRowsExpand:()=>e.getPrePaginationRowModel().flatRows.some((e=>e.getCanExpand())),getToggleAllRowsExpandedHandler:()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},getIsSomeRowsExpanded:()=>{const t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},getIsAllRowsExpanded:()=>{const t=e.getState().expanded;return"boolean"==typeof t?!0===t:!!Object.keys(t).length&&!e.getRowModel().flatRows.some((e=>!e.getIsExpanded()))},getExpandedDepth:()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach((e=>{const n=e.split(".");t=Math.max(t,n.length)})),t},getPreExpandedRowModel:()=>e.getSortedRowModel(),getExpandedRowModel:()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())}},createRow:(e,t)=>({toggleExpanded:n=>{t.setExpanded((r=>{var o;const i=!0===r||!(null==r||!r[e.id]);let a={};if(!0===r?Object.keys(t.getRowModel().rowsById).forEach((e=>{a[e]=!0})):a=r,n=null!=(o=n)?o:!i,!i&&n)return{...a,[e.id]:!0};if(i&&!n){const{[e.id]:t,...n}=a;return n}return r}))},getIsExpanded:()=>{var n;const r=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===r||(null==r?void 0:r[e.id]))},getCanExpand:()=>{var n,r,o;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(r=t.options.enableExpanding)||r)&&!(null==(o=e.subRows)||!o.length)},getToggleExpandedHandler:()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}})},ca=(e,t,n)=>{var r,o,i;const a=n.toLowerCase();return Boolean(null==(r=e.getValue(t))||null==(o=r.toString())||null==(i=o.toLowerCase())?void 0:i.includes(a))};ca.autoRemove=e=>Ca(e);const ga=(e,t,n)=>{var r,o;return Boolean(null==(r=e.getValue(t))||null==(o=r.toString())?void 0:o.includes(n))};ga.autoRemove=e=>Ca(e);const pa=(e,t,n)=>{var r,o;return(null==(r=e.getValue(t))||null==(o=r.toString())?void 0:o.toLowerCase())===(null==n?void 0:n.toLowerCase())};pa.autoRemove=e=>Ca(e);const fa=(e,t,n)=>{var r;return null==(r=e.getValue(t))?void 0:r.includes(n)};fa.autoRemove=e=>Ca(e)||!(null!=e&&e.length);const ma=(e,t,n)=>!n.some((n=>{var r;return!(null!=(r=e.getValue(t))&&r.includes(n))}));ma.autoRemove=e=>Ca(e)||!(null!=e&&e.length);const va=(e,t,n)=>n.some((n=>{var r;return null==(r=e.getValue(t))?void 0:r.includes(n)}));va.autoRemove=e=>Ca(e)||!(null!=e&&e.length);const ba=(e,t,n)=>e.getValue(t)===n;ba.autoRemove=e=>Ca(e);const ha=(e,t,n)=>e.getValue(t)==n;ha.autoRemove=e=>Ca(e);const ya=(e,t,n)=>{let[r,o]=n;const i=e.getValue(t);return i>=r&&i<=o};ya.resolveFilterValue=e=>{let[t,n]=e,r="number"!=typeof t?parseFloat(t):t,o="number"!=typeof n?parseFloat(n):n,i=null===t||Number.isNaN(r)?-1/0:r,a=null===n||Number.isNaN(o)?1/0:o;if(i>a){const e=i;i=a,a=e}return[i,a]},ya.autoRemove=e=>Ca(e)||Ca(e[0])&&Ca(e[1]);const wa={includesString:ca,includesStringSensitive:ga,equalsString:pa,arrIncludes:fa,arrIncludesAll:ma,arrIncludesSome:va,equals:ba,weakEquals:ha,inNumberRange:ya};function Ca(e){return null==e||""===e}function Sa(e,t,n){return!(!e||!e.autoRemove)&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}const xa={sum:(e,t,n)=>n.reduce(((t,n)=>{const r=n.getValue(e);return t+("number"==typeof r?r:0)}),0),min:(e,t,n)=>{let r;return n.forEach((t=>{const n=t.getValue(e);null!=n&&(r>n||void 0===r&&n>=n)&&(r=n)})),r},max:(e,t,n)=>{let r;return n.forEach((t=>{const n=t.getValue(e);null!=n&&(r<n||void 0===r&&n>=n)&&(r=n)})),r},extent:(e,t,n)=>{let r,o;return n.forEach((t=>{const n=t.getValue(e);null!=n&&(void 0===r?n>=n&&(r=o=n):(r>n&&(r=n),o<n&&(o=n)))})),[r,o]},mean:(e,t)=>{let n=0,r=0;if(t.forEach((t=>{let o=t.getValue(e);null!=o&&(o=+o)>=o&&(++n,r+=o)})),n)return r/n},median:(e,t)=>{if(!t.length)return;const n=t.map((t=>t.getValue(e)));if(r=n,!Array.isArray(r)||!r.every((e=>"number"==typeof e)))return;var r;if(1===n.length)return n[0];const o=Math.floor(n.length/2),i=n.sort(((e,t)=>e-t));return n.length%2!=0?i[o]:(i[o-1]+i[o])/2},unique:(e,t)=>Array.from(new Set(t.map((t=>t.getValue(e)))).values()),uniqueCount:(e,t)=>new Set(t.map((t=>t.getValue(e)))).size,count:(e,t)=>t.length},Ia={getInitialState:e=>({columnPinning:{left:[],right:[]},...e}),getDefaultOptions:e=>({onColumnPinningChange:ea("columnPinning",e)}),createColumn:(e,t)=>({pin:n=>{const r=e.getLeafColumns().map((e=>e.id)).filter(Boolean);t.setColumnPinning((e=>{var t,o,i,a,l,s;return"right"===n?{left:(null!=(i=null==e?void 0:e.left)?i:[]).filter((e=>!(null!=r&&r.includes(e)))),right:[...(null!=(a=null==e?void 0:e.right)?a:[]).filter((e=>!(null!=r&&r.includes(e)))),...r]}:"left"===n?{left:[...(null!=(l=null==e?void 0:e.left)?l:[]).filter((e=>!(null!=r&&r.includes(e)))),...r],right:(null!=(s=null==e?void 0:e.right)?s:[]).filter((e=>!(null!=r&&r.includes(e))))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter((e=>!(null!=r&&r.includes(e)))),right:(null!=(o=null==e?void 0:e.right)?o:[]).filter((e=>!(null!=r&&r.includes(e))))}}))},getCanPin:()=>e.getLeafColumns().some((e=>{var n,r;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(r=t.options.enablePinning)||r)})),getIsPinned:()=>{const n=e.getLeafColumns().map((e=>e.id)),{left:r,right:o}=t.getState().columnPinning,i=n.some((e=>null==r?void 0:r.includes(e))),a=n.some((e=>null==o?void 0:o.includes(e)));return i?"left":!!a&&"right"},getPinnedIndex:()=>{var n,r,o;const i=e.getIsPinned();return i?null!=(n=null==(r=t.getState().columnPinning)||null==(o=r[i])?void 0:o.indexOf(e.id))?n:-1:0}}),createRow:(e,t)=>({getCenterVisibleCells:na((()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right]),((e,t,n)=>{const r=[...null!=t?t:[],...null!=n?n:[]];return e.filter((e=>!r.includes(e.column.id)))}),{key:"row.getCenterVisibleCells",debug:()=>{var e;return null!=(e=t.options.debugAll)?e:t.options.debugRows}}),getLeftVisibleCells:na((()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,,]),((e,t)=>(null!=t?t:[]).map((t=>e.find((e=>e.column.id===t)))).filter(Boolean).map((e=>({...e,position:"left"})))),{key:"row.getLeftVisibleCells",debug:()=>{var e;return null!=(e=t.options.debugAll)?e:t.options.debugRows}}),getRightVisibleCells:na((()=>[e._getAllVisibleCells(),t.getState().columnPinning.right]),((e,t)=>(null!=t?t:[]).map((t=>e.find((e=>e.column.id===t)))).filter(Boolean).map((e=>({...e,position:"right"})))),{key:"row.getRightVisibleCells",debug:()=>{var e;return null!=(e=t.options.debugAll)?e:t.options.debugRows}})}),createTable:e=>({setColumnPinning:t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),resetColumnPinning:t=>{var n,r;return e.setColumnPinning(t?{left:[],right:[]}:null!=(n=null==(r=e.initialState)?void 0:r.columnPinning)?n:{left:[],right:[]})},getIsSomeColumnsPinned:t=>{var n;const r=e.getState().columnPinning;var o,i;return t?Boolean(null==(n=r[t])?void 0:n.length):Boolean((null==(o=r.left)?void 0:o.length)||(null==(i=r.right)?void 0:i.length))},getLeftLeafColumns:na((()=>[e.getAllLeafColumns(),e.getState().columnPinning.left]),((e,t)=>(null!=t?t:[]).map((t=>e.find((e=>e.id===t)))).filter(Boolean)),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugColumns}}),getRightLeafColumns:na((()=>[e.getAllLeafColumns(),e.getState().columnPinning.right]),((e,t)=>(null!=t?t:[]).map((t=>e.find((e=>e.id===t)))).filter(Boolean)),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugColumns}}),getCenterLeafColumns:na((()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right]),((e,t,n)=>{const r=[...null!=t?t:[],...null!=n?n:[]];return e.filter((e=>!r.includes(e.id)))}),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugColumns}})})},Ea={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:ea("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>({setRowSelection:t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),resetRowSelection:t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},toggleAllRowsSelected:t=>{e.setRowSelection((n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();const r={...n},o=e.getPreGroupedRowModel().flatRows;return t?o.forEach((e=>{e.getCanSelect()&&(r[e.id]=!0)})):o.forEach((e=>{delete r[e.id]})),r}))},toggleAllPageRowsSelected:t=>e.setRowSelection((n=>{const r=void 0!==t?t:!e.getIsAllPageRowsSelected(),o={...n};return e.getRowModel().rows.forEach((t=>{Ra(o,t.id,r,e)})),o})),getPreSelectedRowModel:()=>e.getCoreRowModel(),getSelectedRowModel:na((()=>[e.getState().rowSelection,e.getCoreRowModel()]),((t,n)=>Object.keys(t).length?Da(e,n):{rows:[],flatRows:[],rowsById:{}}),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugTable}}),getFilteredSelectedRowModel:na((()=>[e.getState().rowSelection,e.getFilteredRowModel()]),((t,n)=>Object.keys(t).length?Da(e,n):{rows:[],flatRows:[],rowsById:{}}),{key:"getFilteredSelectedRowModel",debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugTable}}),getGroupedSelectedRowModel:na((()=>[e.getState().rowSelection,e.getSortedRowModel()]),((t,n)=>Object.keys(t).length?Da(e,n):{rows:[],flatRows:[],rowsById:{}}),{key:"getGroupedSelectedRowModel",debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugTable}}),getIsAllRowsSelected:()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=Boolean(t.length&&Object.keys(n).length);return r&&t.some((e=>e.getCanSelect()&&!n[e.id]))&&(r=!1),r},getIsAllPageRowsSelected:()=>{const t=e.getPaginationRowModel().flatRows.filter((e=>e.getCanSelect())),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some((e=>!n[e.id]))&&(r=!1),r},getIsSomeRowsSelected:()=>{var t;const n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},getIsSomePageRowsSelected:()=>{const t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter((e=>e.getCanSelect())).some((e=>e.getIsSelected()||e.getIsSomeSelected()))},getToggleAllRowsSelectedHandler:()=>t=>{e.toggleAllRowsSelected(t.target.checked)},getToggleAllPageRowsSelectedHandler:()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}}),createRow:(e,t)=>({toggleSelected:n=>{const r=e.getIsSelected();t.setRowSelection((o=>{if(r===(n=void 0!==n?n:!r))return o;const i={...o};return Ra(i,e.id,n,t),i}))},getIsSelected:()=>{const{rowSelection:n}=t.getState();return Oa(e,n)},getIsSomeSelected:()=>{const{rowSelection:n}=t.getState();return"some"===Aa(e,n)},getIsAllSubRowsSelected:()=>{const{rowSelection:n}=t.getState();return"all"===Aa(e,n)},getCanSelect:()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},getCanSelectSubRows:()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},getCanMultiSelect:()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},getToggleSelectedHandler:()=>{const t=e.getCanSelect();return n=>{var r;t&&e.toggleSelected(null==(r=n.target)?void 0:r.checked)}}})},Ra=(e,t,n,r)=>{var o;const i=r.getRow(t);n?(i.getCanMultiSelect()||Object.keys(e).forEach((t=>delete e[t])),i.getCanSelect()&&(e[t]=!0)):delete e[t],null!=(o=i.subRows)&&o.length&&i.getCanSelectSubRows()&&i.subRows.forEach((t=>Ra(e,t.id,n,r)))};function Da(e,t){const n=e.getState().rowSelection,r=[],o={},i=function(e,t){return e.map((e=>{var t;const a=Oa(e,n);if(a&&(r.push(e),o[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:i(e.subRows)}),a)return e})).filter(Boolean)};return{rows:i(t.rows),flatRows:r,rowsById:o}}function Oa(e,t){var n;return null!=(n=t[e.id])&&n}function Aa(e,t,n){if(e.subRows&&e.subRows.length){let n=!0,r=!1;return e.subRows.forEach((e=>{r&&!n||(Oa(e,t)?r=!0:n=!1)})),n?"all":!!r&&"some"}return!1}const Pa=/([0-9]+)/gm;function Ma(e,t){return e===t?0:e>t?1:-1}function Fa(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function Ba(e,t){const n=e.split(Pa).filter(Boolean),r=t.split(Pa).filter(Boolean);for(;n.length&&r.length;){const e=n.shift(),t=r.shift(),o=parseInt(e,10),i=parseInt(t,10),a=[o,i].sort();if(isNaN(a[0])){if(e>t)return 1;if(t>e)return-1}else{if(isNaN(a[1]))return isNaN(o)?-1:1;if(o>i)return 1;if(i>o)return-1}}return n.length-r.length}const Na={alphanumeric:(e,t,n)=>Ba(Fa(e.getValue(n)).toLowerCase(),Fa(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>Ba(Fa(e.getValue(n)),Fa(t.getValue(n))),text:(e,t,n)=>Ma(Fa(e.getValue(n)).toLowerCase(),Fa(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>Ma(Fa(e.getValue(n)),Fa(t.getValue(n))),datetime:(e,t,n)=>{const r=e.getValue(n),o=t.getValue(n);return r>o?1:r<o?-1:0},basic:(e,t,n)=>Ma(e.getValue(n),t.getValue(n))},Ta=[oa,{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:ea("columnVisibility",e)}),createColumn:(e,t)=>({toggleVisibility:n=>{e.getCanHide()&&t.setColumnVisibility((t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()})))},getIsVisible:()=>{var n,r;return null==(n=null==(r=t.getState().columnVisibility)?void 0:r[e.id])||n},getCanHide:()=>{var n,r;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(r=t.options.enableHiding)||r)},getToggleVisibilityHandler:()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}}),createRow:(e,t)=>({_getAllVisibleCells:na((()=>[e.getAllCells(),t.getState().columnVisibility]),(e=>e.filter((e=>e.column.getIsVisible()))),{key:"row._getAllVisibleCells",debug:()=>{var e;return null!=(e=t.options.debugAll)?e:t.options.debugRows}}),getVisibleCells:na((()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()]),((e,t,n)=>[...e,...t,...n]),{key:!1,debug:()=>{var e;return null!=(e=t.options.debugAll)?e:t.options.debugRows}})}),createTable:e=>{const t=(t,n)=>na((()=>[n(),n().filter((e=>e.getIsVisible())).map((e=>e.id)).join("_")]),(e=>e.filter((e=>null==e.getIsVisible?void 0:e.getIsVisible()))),{key:t,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugColumns}});return{getVisibleFlatColumns:t("getVisibleFlatColumns",(()=>e.getAllFlatColumns())),getVisibleLeafColumns:t("getVisibleLeafColumns",(()=>e.getAllLeafColumns())),getLeftVisibleLeafColumns:t("getLeftVisibleLeafColumns",(()=>e.getLeftLeafColumns())),getRightVisibleLeafColumns:t("getRightVisibleLeafColumns",(()=>e.getRightLeafColumns())),getCenterVisibleLeafColumns:t("getCenterVisibleLeafColumns",(()=>e.getCenterLeafColumns())),setColumnVisibility:t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),resetColumnVisibility:t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},toggleAllColumnsVisible:t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce(((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())})),{}))},getIsAllColumnsVisible:()=>!e.getAllLeafColumns().some((e=>!(null!=e.getIsVisible&&e.getIsVisible()))),getIsSomeColumnsVisible:()=>e.getAllLeafColumns().some((e=>null==e.getIsVisible?void 0:e.getIsVisible())),getToggleAllColumnsVisibilityHandler:()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}}},{getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:ea("columnOrder",e)}),createTable:e=>({setColumnOrder:t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),resetColumnOrder:t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},_getOrderColumnsFn:na((()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode]),((e,t,n)=>r=>{let o=[];if(null!=e&&e.length){const t=[...e],n=[...r];for(;n.length&&t.length;){const e=t.shift(),r=n.findIndex((t=>t.id===e));r>-1&&o.push(n.splice(r,1)[0])}o=[...o,...n]}else o=r;return function(e,t,n){if(null==t||!t.length||!n)return e;const r=e.filter((e=>!t.includes(e.id)));return"remove"===n?r:[...t.map((t=>e.find((e=>e.id===t)))).filter(Boolean),...r]}(o,t,n)}),{key:!1})})},Ia,{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],globalFilter:void 0,...e}),getDefaultOptions:e=>({onColumnFiltersChange:ea("columnFilters",e),onGlobalFilterChange:ea("globalFilter",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100,globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n,r;const o=null==(n=e.getCoreRowModel().flatRows[0])||null==(r=n._getAllCellsByColumnId()[t.id])?void 0:r.getValue();return"string"==typeof o||"number"==typeof o}}),createColumn:(e,t)=>({getAutoFilterFn:()=>{const n=t.getCoreRowModel().flatRows[0],r=null==n?void 0:n.getValue(e.id);return"string"==typeof r?wa.includesString:"number"==typeof r?wa.inNumberRange:"boolean"==typeof r||null!==r&&"object"==typeof r?wa.equals:Array.isArray(r)?wa.arrIncludes:wa.weakEquals},getFilterFn:()=>{var n,r;return ta(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(r=t.options.filterFns)?void 0:r[e.columnDef.filterFn])?n:wa[e.columnDef.filterFn]},getCanFilter:()=>{var n,r,o;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(r=t.options.enableColumnFilters)||r)&&(null==(o=t.options.enableFilters)||o)&&!!e.accessorFn},getCanGlobalFilter:()=>{var n,r,o,i;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(r=t.options.enableGlobalFilter)||r)&&(null==(o=t.options.enableFilters)||o)&&(null==(i=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||i)&&!!e.accessorFn},getIsFiltered:()=>e.getFilterIndex()>-1,getFilterValue:()=>{var n,r;return null==(n=t.getState().columnFilters)||null==(r=n.find((t=>t.id===e.id)))?void 0:r.value},getFilterIndex:()=>{var n,r;return null!=(n=null==(r=t.getState().columnFilters)?void 0:r.findIndex((t=>t.id===e.id)))?n:-1},setFilterValue:n=>{t.setColumnFilters((t=>{const r=e.getFilterFn(),o=null==t?void 0:t.find((t=>t.id===e.id)),i=Zi(n,o?o.value:void 0);var a;if(Sa(r,i,e))return null!=(a=null==t?void 0:t.filter((t=>t.id!==e.id)))?a:[];const l={id:e.id,value:i};var s;return o?null!=(s=null==t?void 0:t.map((t=>t.id===e.id?l:t)))?s:[]:null!=t&&t.length?[...t,l]:[l]}))},_getFacetedRowModel:t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),getFacetedRowModel:()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),_getFacetedUniqueValues:t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),getFacetedUniqueValues:()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,_getFacetedMinMaxValues:t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),getFacetedMinMaxValues:()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}),createRow:(e,t)=>({columnFilters:{},columnFiltersMeta:{}}),createTable:e=>({getGlobalAutoFilterFn:()=>wa.includesString,getGlobalFilterFn:()=>{var t,n;const{globalFilterFn:r}=e.options;return ta(r)?r:"auto"===r?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[r])?t:wa[r]},setColumnFilters:t=>{const n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange((e=>{var r;return null==(r=Zi(t,e))?void 0:r.filter((e=>{const t=n.find((t=>t.id===e.id));return!t||!Sa(t.getFilterFn(),e.value,t)}))}))},setGlobalFilter:t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},resetGlobalFilter:t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)},resetColumnFilters:t=>{var n,r;e.setColumnFilters(t?[]:null!=(n=null==(r=e.initialState)?void 0:r.columnFilters)?n:[])},getPreFilteredRowModel:()=>e.getCoreRowModel(),getFilteredRowModel:()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel()),_getGlobalFacetedRowModel:e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),getGlobalFacetedRowModel:()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),_getGlobalFacetedUniqueValues:e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),getGlobalFacetedUniqueValues:()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,_getGlobalFacetedMinMaxValues:e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),getGlobalFacetedMinMaxValues:()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}})},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:ea("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>({getAutoSortingFn:()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const t of n){const n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return Na.datetime;if("string"==typeof n&&(r=!0,n.split(Pa).length>1))return Na.alphanumeric}return r?Na.text:Na.basic},getAutoSortDir:()=>{const n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},getSortingFn:()=>{var n,r;if(!e)throw new Error;return ta(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(r=t.options.sortingFns)?void 0:r[e.columnDef.sortingFn])?n:Na[e.columnDef.sortingFn]},toggleSorting:(n,r)=>{const o=e.getNextSortingOrder(),i=null!=n;t.setSorting((a=>{const l=null==a?void 0:a.find((t=>t.id===e.id)),s=null==a?void 0:a.findIndex((t=>t.id===e.id));let u,d=[],c=i?n:"desc"===o;var g;return u=null!=a&&a.length&&e.getCanMultiSort()&&r?l?"toggle":"add":null!=a&&a.length&&s!==a.length-1?"replace":l?"toggle":"replace","toggle"===u&&(i||o||(u="remove")),"add"===u?(d=[...a,{id:e.id,desc:c}],d.splice(0,d.length-(null!=(g=t.options.maxMultiSortColCount)?g:Number.MAX_SAFE_INTEGER))):d="toggle"===u?a.map((t=>t.id===e.id?{...t,desc:c}:t)):"remove"===u?a.filter((t=>t.id!==e.id)):[{id:e.id,desc:c}],d}))},getFirstSortDir:()=>{var n,r;return(null!=(n=null!=(r=e.columnDef.sortDescFirst)?r:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},getNextSortingOrder:n=>{var r,o;const i=e.getFirstSortDir(),a=e.getIsSorted();return a?!!(a===i||null!=(r=t.options.enableSortingRemoval)&&!r||n&&null!=(o=t.options.enableMultiRemove)&&!o)&&("desc"===a?"asc":"desc"):i},getCanSort:()=>{var n,r;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(r=t.options.enableSorting)||r)&&!!e.accessorFn},getCanMultiSort:()=>{var n,r;return null!=(n=null!=(r=e.columnDef.enableMultiSort)?r:t.options.enableMultiSort)?n:!!e.accessorFn},getIsSorted:()=>{var n;const r=null==(n=t.getState().sorting)?void 0:n.find((t=>t.id===e.id));return!!r&&(r.desc?"desc":"asc")},getSortIndex:()=>{var n,r;return null!=(n=null==(r=t.getState().sorting)?void 0:r.findIndex((t=>t.id===e.id)))?n:-1},clearSorting:()=>{t.setSorting((t=>null!=t&&t.length?t.filter((t=>t.id!==e.id)):[]))},getToggleSortingHandler:()=>{const n=e.getCanSort();return r=>{n&&(null==r.persist||r.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(r))))}}}),createTable:e=>({setSorting:t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),resetSorting:t=>{var n,r;e.setSorting(t?[]:null!=(n=null==(r=e.initialState)?void 0:r.sorting)?n:[])},getPreSortedRowModel:()=>e.getGroupedRowModel(),getSortedRowModel:()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())})},{getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:ea("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>({toggleGrouping:()=>{t.setGrouping((t=>null!=t&&t.includes(e.id)?t.filter((t=>t!==e.id)):[...null!=t?t:[],e.id]))},getCanGroup:()=>{var n,r,o,i;return null!=(n=null==(r=null!=(o=null==(i=e.columnDef.enableGrouping)||i)?o:t.options.enableGrouping)||r)?n:!!e.accessorFn},getIsGrouped:()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},getGroupedIndex:()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},getToggleGroupingHandler:()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},getAutoAggregationFn:()=>{const n=t.getCoreRowModel().flatRows[0],r=null==n?void 0:n.getValue(e.id);return"number"==typeof r?xa.sum:"[object Date]"===Object.prototype.toString.call(r)?xa.extent:void 0},getAggregationFn:()=>{var n,r;if(!e)throw new Error;return ta(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(r=t.options.aggregationFns)?void 0:r[e.columnDef.aggregationFn])?n:xa[e.columnDef.aggregationFn]}}),createTable:e=>({setGrouping:t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),resetGrouping:t=>{var n,r;e.setGrouping(t?[]:null!=(n=null==(r=e.initialState)?void 0:r.grouping)?n:[])},getPreGroupedRowModel:()=>e.getFilteredRowModel(),getGroupedRowModel:()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())}),createRow:(e,t)=>({getIsGrouped:()=>!!e.groupingColumnId,getGroupingValue:n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return null!=r&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},_groupingValuesCache:{}}),createCell:(e,t,n,r)=>({getIsGrouped:()=>t.getIsGrouped()&&t.id===n.groupingColumnId,getIsPlaceholder:()=>!e.getIsGrouped()&&t.getIsGrouped(),getIsAggregated:()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!(null==(t=n.subRows)||!t.length)}})},da,{getInitialState:e=>({...e,pagination:{pageIndex:0,pageSize:10,...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:ea("pagination",e)}),createTable:e=>{let t=!1,n=!1;return{_autoResetPageIndex:()=>{var r,o;if(t){if(null!=(r=null!=(o=e.options.autoResetAll)?o:e.options.autoResetPageIndex)?r:!e.options.manualPagination){if(n)return;n=!0,e._queue((()=>{e.resetPageIndex(),n=!1}))}}else e._queue((()=>{t=!0}))},setPagination:t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange((e=>Zi(t,e))),resetPagination:t=>{var n;e.setPagination(t?{pageIndex:0,pageSize:10}:null!=(n=e.initialState.pagination)?n:{pageIndex:0,pageSize:10})},setPageIndex:t=>{e.setPagination((n=>{let r=Zi(t,n.pageIndex);const o=void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return r=Math.max(0,Math.min(r,o)),{...n,pageIndex:r}}))},resetPageIndex:t=>{var n,r,o;e.setPageIndex(t?0:null!=(n=null==(r=e.initialState)||null==(o=r.pagination)?void 0:o.pageIndex)?n:0)},resetPageSize:t=>{var n,r,o;e.setPageSize(t?10:null!=(n=null==(r=e.initialState)||null==(o=r.pagination)?void 0:o.pageSize)?n:10)},setPageSize:t=>{e.setPagination((e=>{const n=Math.max(1,Zi(t,e.pageSize)),r=e.pageSize*e.pageIndex,o=Math.floor(r/n);return{...e,pageIndex:o,pageSize:n}}))},setPageCount:t=>e.setPagination((n=>{var r;let o=Zi(t,null!=(r=e.options.pageCount)?r:-1);return"number"==typeof o&&(o=Math.max(-1,o)),{...n,pageCount:o}})),getPageOptions:na((()=>[e.getPageCount()]),(e=>{let t=[];return e&&e>0&&(t=[...new Array(e)].fill(null).map(((e,t)=>t))),t}),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugTable}}),getCanPreviousPage:()=>e.getState().pagination.pageIndex>0,getCanNextPage:()=>{const{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return-1===n||0!==n&&t<n-1},previousPage:()=>e.setPageIndex((e=>e-1)),nextPage:()=>e.setPageIndex((e=>e+1)),getPrePaginationRowModel:()=>e.getExpandedRowModel(),getPaginationRowModel:()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),getPageCount:()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getPrePaginationRowModel().rows.length/e.getState().pagination.pageSize)}}}},Ea,la];function La(e){var t;(e.debugAll||e.debugTable)&&console.info("Creating Table Instance...");let n={_features:Ta};const r=n._features.reduce(((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(n))),{});let o={...null!=(t=e.initialState)?t:{}};n._features.forEach((e=>{var t;o=null!=(t=null==e.getInitialState?void 0:e.getInitialState(o))?t:o}));const i=[];let a=!1;const l={_features:Ta,options:{...r,...e},initialState:o,_queue:e=>{i.push(e),a||(a=!0,Promise.resolve().then((()=>{for(;i.length;)i.shift()();a=!1})).catch((e=>setTimeout((()=>{throw e})))))},reset:()=>{n.setState(n.initialState)},setOptions:e=>{const t=Zi(e,n.options);n.options=(e=>n.options.mergeOptions?n.options.mergeOptions(r,e):{...r,...e})(t)},getState:()=>n.options.state,setState:e=>{null==n.options.onStateChange||n.options.onStateChange(e)},_getRowId:(e,t,r)=>{var o;return null!=(o=null==n.options.getRowId?void 0:n.options.getRowId(e,t,r))?o:`${r?[r.id,t].join("."):t}`},getCoreRowModel:()=>(n._getCoreRowModel||(n._getCoreRowModel=n.options.getCoreRowModel(n)),n._getCoreRowModel()),getRowModel:()=>n.getPaginationRowModel(),getRow:e=>{const t=n.getRowModel().rowsById[e];if(!t)throw new Error;return t},_getDefaultColumnDef:na((()=>[n.options.defaultColumn]),(e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{const t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...n._features.reduce(((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef())),{}),...e}}),{debug:()=>{var e;return null!=(e=n.options.debugAll)?e:n.options.debugColumns},key:!1}),_getColumnDefs:()=>n.options.columns,getAllColumns:na((()=>[n._getColumnDefs()]),(e=>{const t=function(e,r,o){return void 0===o&&(o=0),e.map((e=>{const i=function(e,t,n,r){var o,i;const a={...e._getDefaultColumnDef(),...t},l=a.accessorKey;let s,u=null!=(o=null!=(i=a.id)?i:l?l.replace(".","_"):void 0)?o:"string"==typeof a.header?a.header:void 0;if(a.accessorFn?s=a.accessorFn:l&&(s=l.includes(".")?e=>{let t=e;for(const e of l.split(".")){var n;t=null==(n=t)?void 0:n[e]}return t}:e=>e[a.accessorKey]),!u)throw new Error;let d={id:`${String(u)}`,accessorFn:s,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:na((()=>[!0]),(()=>{var e;return[d,...null==(e=d.columns)?void 0:e.flatMap((e=>e.getFlatColumns()))]}),{key:"column.getFlatColumns",debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugColumns}}),getLeafColumns:na((()=>[e._getOrderColumnsFn()]),(e=>{var t;if(null!=(t=d.columns)&&t.length){let t=d.columns.flatMap((e=>e.getLeafColumns()));return e(t)}return[d]}),{key:"column.getLeafColumns",debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugColumns}})};return d=e._features.reduce(((t,n)=>Object.assign(t,null==n.createColumn?void 0:n.createColumn(d,e))),d),d}(n,e,o,r),a=e;return i.columns=a.columns?t(a.columns,i,o+1):[],i}))};return t(e)}),{key:!1,debug:()=>{var e;return null!=(e=n.options.debugAll)?e:n.options.debugColumns}}),getAllFlatColumns:na((()=>[n.getAllColumns()]),(e=>e.flatMap((e=>e.getFlatColumns()))),{key:!1,debug:()=>{var e;return null!=(e=n.options.debugAll)?e:n.options.debugColumns}}),_getAllFlatColumnsById:na((()=>[n.getAllFlatColumns()]),(e=>e.reduce(((e,t)=>(e[t.id]=t,e)),{})),{key:!1,debug:()=>{var e;return null!=(e=n.options.debugAll)?e:n.options.debugColumns}}),getAllLeafColumns:na((()=>[n.getAllColumns(),n._getOrderColumnsFn()]),((e,t)=>t(e.flatMap((e=>e.getLeafColumns())))),{key:!1,debug:()=>{var e;return null!=(e=n.options.debugAll)?e:n.options.debugColumns}}),getColumn:e=>n._getAllFlatColumnsById()[e]};return Object.assign(n,l),n._features.forEach((e=>Object.assign(n,null==e.createTable?void 0:e.createTable(n)))),n}const ka=(e,t,n,r,o,i,a)=>{let l={id:t,index:r,original:n,depth:o,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(l._valuesCache.hasOwnProperty(t))return l._valuesCache[t];const n=e.getColumn(t);return null!=n&&n.accessorFn?(l._valuesCache[t]=n.accessorFn(l.original,r),l._valuesCache[t]):void 0},getUniqueValues:t=>{if(l._uniqueValuesCache.hasOwnProperty(t))return l._uniqueValuesCache[t];const n=e.getColumn(t);return null!=n&&n.accessorFn?n.columnDef.getUniqueValues?(l._uniqueValuesCache[t]=n.columnDef.getUniqueValues(l.original,r),l._uniqueValuesCache[t]):(l._uniqueValuesCache[t]=[l.getValue(t)],l._uniqueValuesCache[t]):void 0},renderValue:t=>{var n;return null!=(n=l.getValue(t))?n:e.options.renderFallbackValue},subRows:null!=i?i:[],getLeafRows:()=>function(e,t){const n=[],r=e=>{e.forEach((e=>{n.push(e);const o=t(e);null!=o&&o.length&&r(o)}))};return r(e),n}(l.subRows,(e=>e.subRows)),getParentRow:()=>l.parentId?e.getRow(l.parentId):void 0,getParentRows:()=>{let e=[],t=l;for(;;){const n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:na((()=>[e.getAllLeafColumns()]),(t=>t.map((t=>function(e,t,n,r){const o={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:()=>{var t;return null!=(t=o.getValue())?t:e.options.renderFallbackValue},getContext:na((()=>[e,n,t,o]),((e,t,n,r)=>({table:e,column:t,row:n,cell:r,getValue:r.getValue,renderValue:r.renderValue})),{key:!1,debug:()=>e.options.debugAll})};return e._features.forEach((r=>{Object.assign(o,null==r.createCell?void 0:r.createCell(o,n,t,e))}),{}),o}(e,l,t,t.id)))),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugRows}}),_getAllCellsByColumnId:na((()=>[l.getAllCells()]),(e=>e.reduce(((e,t)=>(e[t.column.id]=t,e)),{})),{key:"row.getAllCellsByColumnId",debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugRows}})};for(let t=0;t<e._features.length;t++){const n=e._features[t];Object.assign(l,null==n||null==n.createRow?void 0:n.createRow(l,e))}return l};function Va(e,t){return e?function(e){return"function"==typeof e&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}(n=e)||"function"==typeof n||function(e){return"object"==typeof e&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}(n)?i.createElement(e,t):e:null;var n}function _a(){return _a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_a.apply(this,arguments)}function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ga.apply(this,arguments)}function Ha(e,t,n){var r,o,i=null!=(r=n.initialDeps)?r:[];return function(){var r;n.key&&null!=n.debug&&n.debug()&&(r=Date.now());var a,l=e();if(l.length===i.length&&!l.some((function(e,t){return i[t]!==e})))return o;if(i=l,n.key&&null!=n.debug&&n.debug()&&(a=Date.now()),o=t.apply(void 0,l),n.key&&null!=n.debug&&n.debug()){var s=Math.round(100*(Date.now()-r))/100,u=Math.round(100*(Date.now()-a))/100,d=u/16,c=function(e,t){for(e=String(e);e.length<t;)e=" "+e;return e};console.info("%c "+c(u,5)+" /"+c(s,5)+" ms","\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl("+Math.max(0,Math.min(120-120*d,120))+"deg 100% 31%);",null==n?void 0:n.key)}return null==n||null==n.onChange||n.onChange(o),o}}function ja(e,t){if(void 0===e)throw new Error("Unexpected undefined"+(t?": "+t:""));return e}var za=function(e){return e},Ua=function(e){for(var t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[],o=t;o<=n;o++)r.push(o);return r},$a=function(e,t){var n=e.scrollElement;if(n){var r=function(e){var n=e.width,r=e.height;t({width:Math.round(n),height:Math.round(r)})};r(n.getBoundingClientRect());var o=new ResizeObserver((function(e){var t=e[0];if(null!=t&&t.borderBoxSize){var o=t.borderBoxSize[0];if(o)return void r({width:o.inlineSize,height:o.blockSize})}r(n.getBoundingClientRect())}));return o.observe(n,{box:"border-box"}),function(){o.unobserve(n)}}},Wa=function(e,t){var n=e.scrollElement;if(n){var r=function(){t(n[e.options.horizontal?"scrollLeft":"scrollTop"])};return r(),n.addEventListener("scroll",r,{passive:!0}),function(){n.removeEventListener("scroll",r)}}},qa=function(e,t,n){if(null!=t&&t.borderBoxSize){var r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},Xa=function(e,t,n){var r,o,i=t.adjustments,a=void 0===i?0:i,l=t.behavior,s=e+a;null==(r=n.scrollElement)||null==r.scrollTo||r.scrollTo(((o={})[n.options.horizontal?"left":"top"]=s,o.behavior=l,o))},Ya=function(e){var t,n,r=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(t=null,n=function(){return t||("undefined"!=typeof ResizeObserver?t=new ResizeObserver((function(e){e.forEach((function(e){r._measureElement(e.target,e)}))})):null)},{disconnect:function(){var e;return null==(e=n())?void 0:e.disconnect()},observe:function(e){var t;return null==(t=n())?void 0:t.observe(e,{box:"border-box"})},unobserve:function(e){var t;return null==(t=n())?void 0:t.unobserve(e)}}),this.range={startIndex:0,endIndex:0},this.setOptions=function(e){Object.entries(e).forEach((function(t){var n=t[0];void 0===t[1]&&delete e[n]})),r.options=Ga({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:za,rangeExtractor:Ua,onChange:function(){},measureElement:qa,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},e)},this.notify=function(){null==r.options.onChange||r.options.onChange(r)},this.cleanup=function(){r.unsubs.filter(Boolean).forEach((function(e){return e()})),r.unsubs=[],r.scrollElement=null},this._didMount=function(){return r.measureElementCache.forEach(r.observer.observe),function(){r.observer.disconnect(),r.cleanup()}},this._willUpdate=function(){var e=r.options.getScrollElement();r.scrollElement!==e&&(r.cleanup(),r.scrollElement=e,r._scrollToOffset(r.scrollOffset,{adjustments:void 0,behavior:void 0}),r.unsubs.push(r.options.observeElementRect(r,(function(e){var t=r.scrollRect;r.scrollRect=e,(r.options.horizontal?e.width!==t.width:e.height!==t.height)&&r.maybeNotify()}))),r.unsubs.push(r.options.observeElementOffset(r,(function(e){r.scrollAdjustments=0,r.scrollOffset!==e&&(null!==r.isScrollingTimeoutId&&(clearTimeout(r.isScrollingTimeoutId),r.isScrollingTimeoutId=null),r.isScrolling=!0,r.scrollDirection=r.scrollOffset<e?"forward":"backward",r.scrollOffset=e,r.maybeNotify(),r.isScrollingTimeoutId=setTimeout((function(){r.isScrollingTimeoutId=null,r.isScrolling=!1,r.scrollDirection=null,r.maybeNotify()}),r.options.scrollingDelay))}))))},this.getSize=function(){return r.scrollRect[r.options.horizontal?"width":"height"]},this.memoOptions=Ha((function(){return[r.options.count,r.options.paddingStart,r.options.scrollMargin,r.options.getItemKey]}),(function(e,t,n,o){return r.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:n,getItemKey:o}}),{key:!1}),this.getFurthestMeasurement=function(e,t){for(var n=new Map,o=new Map,i=t-1;i>=0;i--){var a=e[i];if(!n.has(a.lane)){var l=o.get(a.lane);if(null==l||a.end>l.end?o.set(a.lane,a):a.end<l.end&&n.set(a.lane,!0),n.size===r.options.lanes)break}}return o.size===r.options.lanes?Array.from(o.values()).sort((function(e,t){return e.end-t.end}))[0]:void 0},this.getMeasurements=Ha((function(){return[r.memoOptions(),r.itemSizeCache]}),(function(e,t){var n=e.count,o=e.paddingStart,i=e.scrollMargin,a=e.getItemKey,l=r.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,r.pendingMeasuredCacheIndexes):0;r.pendingMeasuredCacheIndexes=[];for(var s=r.measurementsCache.slice(0,l),u=l;u<n;u++){var d=a(u),c=1===r.options.lanes?s[u-1]:r.getFurthestMeasurement(s,u),g=c?c.end:o+i,p=t.get(d),f="number"==typeof p?p:r.options.estimateSize(u),m=g+f,v=c?c.lane:u%r.options.lanes;s[u]={index:u,start:g,size:f,end:m,key:d,lane:v}}return r.measurementsCache=s,s}),{key:!1,debug:function(){return r.options.debug}}),this.calculateRange=Ha((function(){return[r.getMeasurements(),r.getSize(),r.scrollOffset]}),(function(e,t,n){return r.range=function(e){for(var t=e.measurements,n=e.outerSize,r=e.scrollOffset,o=t.length-1,i=Ka(0,o,(function(e){return t[e].start}),r),a=i;a<o&&t[a].end<r+n;)a++;return{startIndex:i,endIndex:a}}({measurements:e,outerSize:t,scrollOffset:n})}),{key:!1,debug:function(){return r.options.debug}}),this.maybeNotify=Ha((function(){var e=r.calculateRange();return[e.startIndex,e.endIndex,r.isScrolling]}),(function(){r.notify()}),{key:!1,debug:function(){return r.options.debug},initialDeps:[this.range.startIndex,this.range.endIndex,this.isScrolling]}),this.getIndexes=Ha((function(){return[r.options.rangeExtractor,r.calculateRange(),r.options.overscan,r.options.count]}),(function(e,t,n,r){return e(Ga({},t,{overscan:n,count:r}))}),{key:!1,debug:function(){return r.options.debug}}),this.indexFromElement=function(e){var t=r.options.indexAttribute,n=e.getAttribute(t);return n?parseInt(n,10):(console.warn("Missing attribute name '"+t+"={index}' on measured element."),-1)},this._measureElement=function(e,t){var n=r.measurementsCache[r.indexFromElement(e)];if(n){var o=r.measureElementCache.get(n.key);if(e.isConnected){o!==e&&(o&&r.observer.unobserve(o),r.observer.observe(e),r.measureElementCache.set(n.key,e));var i=r.options.measureElement(e,t,r);r.resizeItem(n,i)}else o&&(r.observer.unobserve(o),r.measureElementCache.delete(n.key))}else r.measureElementCache.forEach((function(t,n){t===e&&(r.observer.unobserve(e),r.measureElementCache.delete(n))}))},this.resizeItem=function(e,t){var n,o=t-(null!=(n=r.itemSizeCache.get(e.key))?n:e.size);0!==o&&(e.start<r.scrollOffset&&r._scrollToOffset(r.scrollOffset,{adjustments:r.scrollAdjustments+=o,behavior:void 0}),r.pendingMeasuredCacheIndexes.push(e.index),r.itemSizeCache=new Map(r.itemSizeCache.set(e.key,t)),r.notify())},this.measureElement=function(e){e&&r._measureElement(e,void 0)},this.getVirtualItems=Ha((function(){return[r.getIndexes(),r.getMeasurements()]}),(function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=t[e[r]];n.push(i)}return n}),{key:!1,debug:function(){return r.options.debug}}),this.getVirtualItemForOffset=function(e){var t=r.getMeasurements();return ja(t[Ka(0,t.length-1,(function(e){return ja(t[e]).start}),e)])},this.getOffsetForAlignment=function(e,t){var n=r.getSize();"auto"===t&&(t=e<=r.scrollOffset?"start":e>=r.scrollOffset+n?"end":"start"),"start"===t||("end"===t?e-=n:"center"===t&&(e-=n/2));var o=r.options.horizontal?"scrollWidth":"scrollHeight",i=(r.scrollElement?"document"in r.scrollElement?r.scrollElement.document.documentElement[o]:r.scrollElement[o]:0)-r.getSize();return Math.max(Math.min(i,e),0)},this.getOffsetForIndex=function(e,t){void 0===t&&(t="auto"),e=Math.max(0,Math.min(e,r.options.count-1));var n=ja(r.getMeasurements()[e]);if("auto"===t)if(n.end>=r.scrollOffset+r.getSize()-r.options.scrollPaddingEnd)t="end";else{if(!(n.start<=r.scrollOffset+r.options.scrollPaddingStart))return[r.scrollOffset,t];t="start"}var o="end"===t?n.end+r.options.scrollPaddingEnd:n.start-r.options.scrollPaddingStart;return[r.getOffsetForAlignment(o,t),t]},this.isDynamicMode=function(){return r.measureElementCache.size>0},this.cancelScrollToIndex=function(){null!==r.scrollToIndexTimeoutId&&(clearTimeout(r.scrollToIndexTimeoutId),r.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(e,t){var n=void 0===t?{}:t,o=n.align,i=void 0===o?"start":o,a=n.behavior;r.cancelScrollToIndex(),"smooth"===a&&r.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),r._scrollToOffset(r.getOffsetForAlignment(e,i),{adjustments:void 0,behavior:a})},this.scrollToIndex=function(e,t){var n=void 0===t?{}:t,o=n.align,i=void 0===o?"auto":o,a=n.behavior;e=Math.max(0,Math.min(e,r.options.count-1)),r.cancelScrollToIndex(),"smooth"===a&&r.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var l=r.getOffsetForIndex(e,i),s=l[0],u=l[1];r._scrollToOffset(s,{adjustments:void 0,behavior:a}),"smooth"!==a&&r.isDynamicMode()&&(r.scrollToIndexTimeoutId=setTimeout((function(){var t,n;(r.scrollToIndexTimeoutId=null,r.measureElementCache.has(r.options.getItemKey(e)))?(t=r.getOffsetForIndex(e,u)[0],n=r.scrollOffset,Math.abs(t-n)<1||r.scrollToIndex(e,{align:u,behavior:a})):r.scrollToIndex(e,{align:u,behavior:a})})))},this.scrollBy=function(e,t){var n=(void 0===t?{}:t).behavior;r.cancelScrollToIndex(),"smooth"===n&&r.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),r._scrollToOffset(r.scrollOffset+e,{adjustments:void 0,behavior:n})},this.getTotalSize=function(){var e;return((null==(e=r.getMeasurements()[r.options.count-1])?void 0:e.end)||r.options.paddingStart)-r.options.scrollMargin+r.options.paddingEnd},this._scrollToOffset=function(e,t){var n=t.adjustments,o=t.behavior;r.options.scrollToFn(e,{behavior:o,adjustments:n},r)},this.measure=function(){r.itemSizeCache=new Map,r.notify()},this.setOptions(e),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach((function(e){r.itemSizeCache.set(e.key,e.size)})),this.maybeNotify()},Ka=function(e,t,n,r){for(;e<=t;){var o=(e+t)/2|0,i=n(o);if(i<r)e=o+1;else{if(!(i>r))return o;t=o-1}}return e>0?e-1:0},Ja="undefined"!=typeof document?i.useLayoutEffect:i.useEffect;const Qa=e=>{var t;const r=e.colors.emphasize(e.colors.background.primary,.03);return{table:n.css`
      border-radius: ${null===(t=e.shape.radius)||void 0===t?void 0:t.default};
      width: 100%;

      td {
        padding: ${e.spacing(1)};
      }

      td,
      th {
        min-width: ${e.spacing(3)};
      }
    `,disableGrow:n.css`
      width: 0;
    `,header:n.css`
      position: sticky;
      background-color: ${e.colors.background.primary};
      box-shadow: 0 1px ${e.colors.border.weak};
    `,headerCell:n.css`
      padding: ${e.spacing(1)};
    `,row:n.css`
      border-bottom: 1px solid ${e.colors.border.weak};

      &:hover {
        background-color: ${r};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,expandedRow:n.css`
      border-bottom: none;
    `,expandedContentRow:n.css`
      td {
        border-bottom: 1px solid ${e.colors.border.weak};
        position: relative;
        padding: ${e.spacing(2,2,2,5)};

        &:before {
          content: '';
          position: absolute;
          width: 1px;
          top: 0;
          left: 16px;
          bottom: ${e.spacing(2)};
          background: ${e.colors.border.medium};
        }
      }
    `,sortableHeader:n.css`
      /* increases selector's specificity so that it always takes precedence over default styles  */
      && {
      }
    `,headerButton:n.css`
      margin-left: ${e.spacing(.5)};
    `,filterContainer:n.css`
      background-color: ${e.colors.background.primary};
      padding: ${e.spacing(1)};
    `,filterInput:n.css`
      margin-top: ${e.spacing(.5)};
    `}},Za=({column:e,alwaysVisible:t})=>{const n=(0,r.useStyles2)(Qa),[o,l]=(0,i.useState)(t),s=e.getFilterValue(),u=(0,i.useCallback)((()=>{l((e=>!e))}),[]),d=(0,i.useCallback)((t=>{e.setFilterValue(t.currentTarget.value)}),[e]);if("isFavorite"===e.columnDef.id)return a().createElement(r.Button,{variant:"secondary",fill:"text",size:"sm",onClick:()=>{e.setFilterValue(!s)},"data-testid":Ao},s?a().createElement(r.Icon,{name:"favorite"}):a().createElement(r.Icon,{name:"star"}));const c=a().createElement(r.Input,{placeholder:"Search values",value:"string"==typeof s?s:"",onChange:d,className:n.filterInput,"data-testid":Po,addonAfter:s?a().createElement(r.Button,{variant:"secondary",icon:"times",onClick:()=>e.setFilterValue(""),"data-testid":Mo}):null});return t?c:a().createElement(a().Fragment,null,a().createElement(r.Button,{icon:"filter",fill:"text",onClick:u,size:"sm",className:n.headerButton,"data-testid":So}),o&&c)},el=({data:e,className:t,columns:o,getSubRows:l,showHeader:s=!0,firstSelectedRowRef:u,tableRef:d,topOffset:c=0,tableHeaderRef:g,scrollableContainerRef:p,alwaysVisibleFilter:f})=>{var m,v;const b=(0,r.useStyles2)(Qa),[h,y]=(0,i.useState)(!0),[w,C]=(0,i.useState)([]),S=function(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=i.useState((()=>({current:La(t)}))),[r,o]=i.useState((()=>n.current.initialState));return n.current.setOptions((t=>({...t,...e,state:{...r,...e.state},onStateChange:t=>{o(t),null==e.onStateChange||e.onStateChange(t)}}))),n.current}({columns:o,data:e,autoResetExpanded:!1,enableSorting:!0,enableMultiSort:!1,getSubRows:l,getCoreRowModel:e=>na((()=>[e.options.data]),(t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(t,o,i){void 0===o&&(o=0);const a=[];for(let s=0;s<t.length;s++){const u=ka(e,e._getRowId(t[s],s,i),t[s],s,o,void 0,null==i?void 0:i.id);var l;n.flatRows.push(u),n.rowsById[u.id]=u,a.push(u),e.options.getSubRows&&(u.originalSubRows=e.options.getSubRows(t[s],s),null!=(l=u.originalSubRows)&&l.length&&(u.subRows=r(u.originalSubRows,o+1,u)))}return a};return n.rows=r(t),n}),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}}),getSortedRowModel:e=>na((()=>[e.getState().sorting,e.getPreSortedRowModel()]),((t,n)=>{if(!n.rows.length||null==t||!t.length)return n;const r=e.getState().sorting,o=[],i=r.filter((t=>{var n;return null==(n=e.getColumn(t.id))?void 0:n.getCanSort()})),a={};i.forEach((t=>{const n=e.getColumn(t.id);n&&(a[t.id]={sortUndefined:n.columnDef.sortUndefined,invertSorting:n.columnDef.invertSorting,sortingFn:n.getSortingFn()})}));const l=e=>{const t=[...e];return t.sort(((e,t)=>{for(let r=0;r<i.length;r+=1){var n;const o=i[r],l=a[o.id],s=null!=(n=null==o?void 0:o.desc)&&n;let u=0;if(l.sortUndefined){const n=void 0===e.getValue(o.id),r=void 0===t.getValue(o.id);(n||r)&&(u=n&&r?0:n?l.sortUndefined:-l.sortUndefined)}if(0===u&&(u=l.sortingFn(e,t,o.id)),0!==u)return s&&(u*=-1),l.invertSorting&&(u*=-1),u}return e.index-t.index})),t.forEach((e=>{var t;o.push(e),null!=(t=e.subRows)&&t.length&&(e.subRows=l(e.subRows))})),t};return{rows:l(n.rows),flatRows:o,rowsById:n.rowsById}}),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}}),getExpandedRowModel:e=>na((()=>[e.getState().expanded,e.getPreExpandedRowModel(),e.options.paginateExpandedRows]),((e,t,n)=>!t.rows.length||!0!==e&&!Object.keys(null!=e?e:{}).length?t:n?function(e){const t=[],n=e=>{var r;t.push(e),null!=(r=e.subRows)&&r.length&&e.getIsExpanded()&&e.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}(t):t),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugTable}}),getFilteredRowModel:e=>na((()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter]),((t,n,r)=>{if(!t.rows.length||(null==n||!n.length)&&!r){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}const o=[],i=[];(null!=n?n:[]).forEach((t=>{var n;const r=e.getColumn(t.id);if(!r)return;const i=r.getFilterFn();i&&o.push({id:t.id,filterFn:i,resolvedValue:null!=(n=null==i.resolveFilterValue?void 0:i.resolveFilterValue(t.value))?n:t.value})}));const a=n.map((e=>e.id)),l=e.getGlobalFilterFn(),s=e.getAllLeafColumns().filter((e=>e.getCanGlobalFilter()));let u,d;r&&l&&s.length&&(a.push("__global__"),s.forEach((e=>{var t;i.push({id:e.id,filterFn:l,resolvedValue:null!=(t=null==l.resolveFilterValue?void 0:l.resolveFilterValue(r))?t:r})})));for(let e=0;e<t.flatRows.length;e++){const n=t.flatRows[e];if(n.columnFilters={},o.length)for(let e=0;e<o.length;e++){u=o[e];const t=u.id;n.columnFilters[t]=u.filterFn(n,t,u.resolvedValue,(e=>{n.columnFiltersMeta[t]=e}))}if(i.length){for(let e=0;e<i.length;e++){d=i[e];const t=d.id;if(d.filterFn(n,t,d.resolvedValue,(e=>{n.columnFiltersMeta[t]=e}))){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return function(e,t,n){return n.options.filterFromLeafRows?function(e,t,n){var r;const o={},i=null!=(r=n.options.maxLeafRowFilterDepth)?r:100,a=function(e,r){void 0===r&&(r=0);const l=[];for(let u=0;u<e.length;u++){var s;let d=e[u];const c=ka(n,d.id,d.original,d.index,d.depth,void 0,d.parentId);if(c.columnFilters=d.columnFilters,null!=(s=d.subRows)&&s.length&&r<i){if(c.subRows=a(d.subRows,r+1),d=c,t(d)&&!c.subRows.length){l.push(d),o[d.id]=d,o[u]=d;continue}if(t(d)||c.subRows.length){l.push(d),o[d.id]=d,o[u]=d;continue}}else d=c,t(d)&&(l.push(d),o[d.id]=d,o[u]=d)}return l};return{rows:a(e),flatRows:[],rowsById:o}}(e,t,n):function(e,t,n){var r;const o=[],i={},a=null!=(r=n.options.maxLeafRowFilterDepth)?r:100,l=function(e,r){void 0===r&&(r=0);const s=[];for(let d=0;d<e.length;d++){let c=e[d];if(t(c)){var u;if(null!=(u=c.subRows)&&u.length&&r<a){const e=ka(n,c.id,c.original,c.index,c.depth,void 0,c.parentId);e.subRows=l(c.subRows,r+1),c=e}s.push(c),o.push(c),i[c.id]=c}}return s};return{rows:l(e),flatRows:o,rowsById:i}}(e,t,n)}(t.rows,(e=>{for(let t=0;t<a.length;t++)if(!1===e.columnFilters[a[t]])return!1;return!0}),e)}),{key:!1,debug:()=>{var t;return null!=(t=e.options.debugAll)?t:e.options.debugTable},onChange:()=>{e._autoResetPageIndex()}}),onColumnFiltersChange:C,enableExpanding:!0,onExpandedChange:y,initialState:{expanded:!0},state:{expanded:h,columnFilters:w}}),{rows:x}=S.getRowModel(),I=(E={getScrollElement:()=>p.current,count:x.length,estimateSize:()=>38,overscan:10},function(e){var t=i.useReducer((function(){return{}}),{})[1],n=_a({},e,{onChange:function(n){t(),null==e.onChange||e.onChange(n)}}),r=i.useState((function(){return new Ya(n)}))[0];return r.setOptions(n),i.useEffect((function(){return r._didMount()}),[]),Ja((function(){return r._willUpdate()})),r}(_a({observeElementRect:$a,observeElementOffset:Wa,scrollToFn:Xa},E)));var E;const R=I.getVirtualItems(),D=I.getTotalSize(),O=R.length>0&&(null==R||null===(m=R[0])||void 0===m?void 0:m.start)||0,A=R.length>0?D-((null==R||null===(v=R[R.length-1])||void 0===v?void 0:v.end)||0):0;let P=!1;return a().createElement("table",{className:(0,n.cx)(b.table,t),ref:d},s&&a().createElement("thead",{"data-testid":Fo,className:b.header,style:{top:c},ref:g},S.getHeaderGroups().map((e=>a().createElement("tr",{key:e.id},e.headers.map((e=>a().createElement("th",{key:e.id,className:(0,n.cx)(b.headerCell,{[b.disableGrow]:!e.column.getCanResize(),[b.sortableHeader]:e.column.getCanSort()}),colSpan:e.colSpan,style:{width:"isFavorite"===e.column.columnDef.id?48:"auto"}},Va(e.column.columnDef.header,e.getContext()),e.column.getCanSort()&&a().createElement(r.Button,{icon:e.column.getIsSorted()?"asc"===e.column.getIsSorted()?"sort-amount-up":"sort-amount-down":"list-ul",fill:"text",onClick:e.column.getToggleSortingHandler(),size:"sm",className:b.headerButton,variant:e.column.getIsSorted()?"primary":"secondary","data-testid":xo,title:"Sort by status"}),e.column.getCanFilter()&&a().createElement(Za,{column:e.column,alwaysVisible:f})))))))),a().createElement("tbody",null,O>0&&a().createElement("tr",null,a().createElement("td",{style:{height:`${O}px`}})),R.map((e=>{const t=x[e.index];let r;return"selected"in t.original&&t.original.selected&&!P&&(P=!0,r=u),a().createElement("tr",{key:t.id,className:(0,n.cx)(b.row,t.getIsExpanded()&&b.expandedRow),ref:r,"data-testid":Io(t.id)},t.getVisibleCells().map((e=>a().createElement("td",{key:e.id},Va(e.column.columnDef.cell,e.getContext())))))})),A>0&&a().createElement("tr",null,a().createElement("td",{style:{height:`${A}px`}}))))},tl=({data:e,options:t,width:o,height:l,eventBus:s})=>{var u,d,c,g;const[p,f]=(0,i.useState)(null===(d=t.groups)||void 0===d||null===(u=d[0])||void 0===u?void 0:u.name),m=(0,i.useMemo)((()=>{var e,n;if((null===(e=t.groups)||void 0===e?void 0:e.length)&&p)return null===(n=t.groups.find((e=>e.name===p)))||void 0===n?void 0:n.items}),[t.groups,p]);(0,i.useEffect)((()=>{var e,n,r;(null===(e=t.groups)||void 0===e?void 0:e.some((e=>e.name===p)))||f(null===(r=t.groups)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.name)}),[p,t.groups]);const{tableData:v,columns:b,getSubRows:h}=(({data:e,options:t,eventBus:n,levels:o})=>{var l;const s=(0,r.useTheme2)(),u=Gi(s),d=(null==o?void 0:o.length)?null===(l=o[o.length-1])||void 0===l?void 0:l.name:t.variable,{variable:c,getVariable:g}=ki(n,d),p=Xi(),f=_i({data:e,status:t.status,name:t.name}),m=(0,i.useMemo)((()=>{if(!c)return[];const n=mi(c),r=o||[];if(r.length&&pi(c)){const o={},i=((e,t,n)=>{const r=t[t.length-1],o=e.series.find(((e,t)=>void 0===e.refId?t===r.source:e.refId===r.source));if(!o)return null;const i=(e=>{const t=[];for(let n=0;n<e.length;n+=1){const r=e.fields.reduce(((e,t)=>yi(hi({},e),{[t.name]:t.values.get(n)})),{});t.push(r)}return t})(o);return Ci(i,t.map((({name:e})=>e)),n||((e,t)=>({value:e[t],label:e[t],selected:!1,showStatus:!1,selectable:!0})))})(e,r,((e,r,i)=>{const a=`${e[r]}`;let l=o[r];if(!l){const e=g(r);l=e,o[r]=e}const s=pi(l)?l.helpers.getOption(a):c.helpers.getOption(a);return Si({value:a,selected:(null==s?void 0:s.selected)||!1,variable:l,isFavorite:p.isAdded(r,a),name:r,label:(null==s?void 0:s.text)||a},{children:i,status:f(a),isSelectedAll:n,favoritesEnabled:t.favorites,groupSelection:t.groupSelection})}));if(i)return 1===r.length&&(null==c?void 0:c.multi)&&(null==c?void 0:c.includeAll)?[Si({value:ii,selected:n,variable:g(r[0].name),isFavorite:!1,name:r[0].name,label:oi},{status:f(oi),isSelectedAll:n,favoritesEnabled:t.favorites,groupSelection:t.groupSelection})].concat(i):i}return pi(c)?c.options.map((e=>Si({value:e.value,selected:e.selected,variable:c,isFavorite:p.isAdded(c.name,e.value),label:e.text},{status:f(e.value===ii?oi:e.value),isSelectedAll:n,favoritesEnabled:t.favorites,groupSelection:t.groupSelection}))):c.type===Qr.TEXTBOX?[Si({value:(null===(i=c.current.value)||void 0===i?void 0:i.toString())||"",label:(null===(a=c.current.text)||void 0===a?void 0:a.toString())||"",selected:!1,variable:c,isFavorite:!1,name:null==c?void 0:c.name},{status:f(""),isSelectedAll:n,favoritesEnabled:t.favorites,groupSelection:t.groupSelection})]:[];var i,a}),[c,o,e,g,p,f,t.favorites,t.groupSelection]),v=(0,i.useCallback)((e=>{const t=e.childValues||[e.value],n=xi(m,t);Ii(n).filter((e=>e.variable!==c&&e.selectable)).map((e=>({variable:e.variable,values:e.values.filter((t=>{var n;return pi(e.variable)?null===(n=e.variable)||void 0===n?void 0:n.options.some((e=>e.text===t&&!e.selected)):t}))}))).filter((e=>e.values.length>0)).forEach((({variable:e,values:t})=>{gi(t,e)})),gi(t,c)}),[c,m]),b=(0,i.useCallback)((e=>{var t;e.selected&&pi(e.variable)&&!(null===(t=e.variable)||void 0===t?void 0:t.multi)&&e.variable===c&&v(e)}),[v,c]),h=(0,i.useMemo)((()=>{const e=`${(null==c?void 0:c.name)||d}`,n=[{id:"value",accessorKey:"value",header:({table:n})=>{const o=!!c&&mi(c);return a().createElement(a().Fragment,null,t.groupSelection&&a().createElement("input",{type:"checkbox",onChange:()=>{const e={childValues:wi(m,(e=>e.childValues||e.value),[]),selected:o,value:"",showStatus:!1,label:""};v(e)},checked:o,className:u.selectControl,id:`${e}-select-all`,"data-testid":Do,title:"Select all"}),n.getCanSomeRowsExpand()&&a().createElement(r.Button,{className:u.expandButton,onClick:n.getToggleAllRowsExpandedHandler(),variant:"secondary",fill:"text",size:"sm",icon:n.getIsAllRowsExpanded()?"angle-double-down":"angle-double-right","data-testid":Co}),(null==c?void 0:c.label)||d)},enableColumnFilter:t.filter,filterFn:Ei,enableSorting:t.statusSort,sortingFn:Ri,cell:({row:n,getValue:o})=>{const i=n.original.label||o();return a().createElement("div",{className:u.rowContent,style:{paddingLeft:s.spacing(1.5*n.depth)},"data-testid":Eo(i,n.depth)},n.original.selectable&&a().createElement("input",{type:pi(c)?(null==c?void 0:c.multi)?"checkbox":"radio":"text",onChange:()=>v(n.original),onClick:()=>b(n.original),checked:n.original.selected,className:u.selectControl,id:`${e}-${n.original.value}`,"data-testid":Ro}),n.getCanExpand()&&a().createElement(r.Button,{className:u.expandButton,onClick:n.getToggleExpandedHandler(),variant:"secondary",fill:"text",size:"sm",icon:n.getIsExpanded()?"angle-down":"angle-right","data-testid":wo}),pi(c)&&a().createElement("label",{onClick:()=>{n.original.selectable?v(n.original):n.getCanExpand()&&n.getToggleExpandedHandler()()},"data-testid":Bo,className:u.label},n.original.showStatus&&a().createElement("span",{className:u.status,style:{backgroundColor:n.original.statusColor}}),a().createElement("span",{style:{fontWeight:n.original.selected?s.typography.fontWeightBold:s.typography.fontWeightRegular}},t.showName&&n.original.name?`${n.original.name}: `:"",i)),(null==c?void 0:c.type)===Qr.TEXTBOX&&a().createElement(Hi,{variable:c}))}}];return t.favorites&&n.push({id:"isFavorite",accessorKey:"isFavorite",enableColumnFilter:!0,enableResizing:!1,enableSorting:!1,header:"",filterFn:Di,cell:({row:e,getValue:t})=>{const n=t();return e.original.canBeFavorite?a().createElement(r.Button,{variant:"secondary",fill:"text",size:"sm",onClick:()=>{var t,r;n?p.remove(null===(t=e.original.variable)||void 0===t?void 0:t.name,e.original.value):p.add(null===(r=e.original.variable)||void 0===r?void 0:r.name,e.original.value)},"data-testid":Oo},n?a().createElement(r.Icon,{name:"favorite"}):a().createElement(r.Icon,{name:"star"})):null}}),n}),[c,d,t.filter,t.statusSort,t.favorites,t.groupSelection,t.showName,m,u.selectControl,u.expandButton,u.rowContent,u.label,u.status,v,b,s,p]),y=(0,i.useCallback)((e=>e.children),[]);return{tableData:m,columns:h,getSubRows:y}})({data:e,options:t,eventBus:s,levels:m}),{containerRef:y,style:w}=(({width:e,height:t,sticky:n})=>{const r=(0,i.useRef)(null),[o,a]=(0,i.useState)({position:"absolute",overflow:"auto",width:e,height:t});return(0,i.useLayoutEffect)((()=>{const o=document.querySelector(".main-view .scrollbar-view"),i=()=>{if(r.current&&o){if(n){const{y:t,height:n}=r.current.getBoundingClientRect(),i=o.getBoundingClientRect(),l=Math.abs(Math.min(t-i.top,0)),s=i.height-t+i.top;return void a({width:e,height:Math.min(Math.max(n-l,0),s),transform:`translateY(${l}px)`})}a({width:e,height:t})}};return i(),o&&n?(o.addEventListener("scroll",i),()=>{o.removeEventListener("scroll",i)}):()=>{}}),[r,e,t,n]),{containerRef:r,style:o}})({width:o,height:l,sticky:t.sticky}),{containerRef:C,tableRef:S,headerRef:x,tableTopOffset:I,tableHeaderRef:E,tableContentTopOffset:R}=(({tableData:e,height:t,options:n})=>{const r=(0,i.useRef)(null),o=(0,i.useRef)(null),a=(0,i.useRef)(null),l=(0,i.useRef)(null),[s,u]=(0,i.useState)(0),[d,c]=(0,i.useState)(0);return(0,i.useEffect)((()=>{if(r.current){let e=0;o.current&&(e+=o.current.clientHeight),u(e)}}),[e,t,n.groups]),(0,i.useEffect)((()=>{if(r.current){let e=s;l.current&&(e+=l.current.clientHeight),c(e)}}),[e,s,n.header,n.filter]),{containerRef:r,headerRef:o,tableRef:a,tableHeaderRef:l,tableTopOffset:s,tableContentTopOffset:d}})({height:l,options:t,tableData:v}),D=(0,i.useRef)(null),O=(({containerRef:e})=>(0,i.useCallback)(((t,n=0)=>{if(e.current){const{top:r}=e.current.getBoundingClientRect(),{top:o}=t.getBoundingClientRect(),i=o+e.current.scrollTop-r,a=i-n;e.current.scrollTo({top:a>=0?a:i})}}),[e]))({containerRef:C}),A=(0,i.useRef)(!1);(0,i.useEffect)((()=>{y.current&&D.current&&t.autoScroll&&O(D.current,R)}),[O,y,p,D,t.autoScroll,R]),(0,i.useEffect)((()=>{y.current&&D.current&&t.autoScroll&&v&&!A.current&&O(D.current,R)}),[O,y,D,t.autoScroll,v,R]);const P=(0,r.useTheme2)(),M=Gi(P);return a().createElement(r.ClickOutsideWrapper,{onClick:()=>{A.current&&(A.current=!1)},useCapture:!0},a().createElement("div",{"data-testid":ho,className:(0,n.cx)(M.wrapper,n.css`
            width: ${o}px;
            height: ${l}px;
          `),ref:y,onMouseDown:()=>{A.current=!0}},!v.length&&a().createElement(r.Alert,{"data-testid":bo,severity:"info",title:"Variable"},"Variable is not selected or do not match returned fields."),a().createElement("div",{style:w,className:M.content,ref:C,"data-testid":vo},(null===(c=t.groups)||void 0===c?void 0:c.length)>1&&a().createElement("div",{ref:x,className:M.header},a().createElement(r.TabsBar,null,null===(g=t.groups)||void 0===g?void 0:g.map((e=>a().createElement(r.Tab,{key:e.name,label:e.name,onChangeTab:()=>f(e.name),active:p===e.name,"data-testid":yo(e.name)}))))),a().createElement(el,{key:p,columns:b,data:v,getSubRows:h,showHeader:t.header,firstSelectedRowRef:D,tableRef:S,tableHeaderRef:E,topOffset:I,scrollableContainerRef:C,alwaysVisibleFilter:t.alwaysVisibleFilter}))))};function nl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){nl(e,t,n[t])}))}return e}const ol=new e.PanelPlugin((e=>{var{options:n,eventBus:r}=e,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["options","eventBus"]);return(({eventBus:e,variableName:n})=>{const{variable:r}=ki(e,n),o=null==r?void 0:r.current;(0,i.useEffect)((()=>{if(null==o?void 0:o.value){const e=t.locationService.getLocation();t.locationService.replace(`/d/${o.value}${e.search}`)}}),[null==o?void 0:o.value])})({eventBus:r,variableName:n.dashboardVariable}),(({eventBus:e,variableName:n,enabled:r})=>{const{variable:o}=ki(e,n),a=Vi(n);(0,i.useEffect)((()=>{if(r&&o&&pi(o)&&o.multi){const e=t.locationService.getSearch().getAll(`var-${o.name}`).filter((e=>0!==e.toLowerCase().indexOf("all"))),n=(Array.isArray(o.current.value)?o.current.value:[o.current.value]).filter((e=>e!==ii)),r=e.filter((e=>!o.options.some((t=>t.value===e))));if(r.length){const e=a.get();a.save((e=>{const t=new Set;return e.forEach((e=>{t.add(e)})),Array.from(t.values())})(e.concat(r))),ci(o.name,n.length?n:[oi])}const i=a.get(),l=i.length?i.filter((e=>o.options.some((t=>t.value===e)))):[];l.length&&(a.save(i.filter((e=>!l.includes(e)))),ci(o.name,n.concat(l)))}}),[r,a,o])})({eventBus:r,variableName:n.variable,enabled:n.persistent}),n.displayMode===Jr.MINIMIZE?a().createElement(Qi,rl({options:n,eventBus:r},o)):n.displayMode===Jr.BUTTON?a().createElement(Ki,rl({options:n,eventBus:r},o)):a().createElement(tl,rl({options:n,eventBus:r},o))})).setNoPadding().useFieldConfig({disableStandardOptions:[e.FieldConfigProperty.Unit,e.FieldConfigProperty.Color,e.FieldConfigProperty.Min,e.FieldConfigProperty.Max,e.FieldConfigProperty.Decimals,e.FieldConfigProperty.DisplayName,e.FieldConfigProperty.NoValue,e.FieldConfigProperty.Links,e.FieldConfigProperty.Mappings]}).setPanelOptions((n=>{const r=(0,t.getTemplateSrv)().getVariables().map((e=>({label:e.name,value:e.name}))),o=e=>e.displayMode===Jr.MINIMIZE,i=e=>e.displayMode===Jr.BUTTON,a=e=>e.displayMode===Jr.TABLE;return n.addRadio({path:"displayMode",name:"Display mode",settings:{options:ro},defaultValue:Jr.TABLE}),n.addSliderInput({path:"padding",name:"Padding",defaultValue:10,settings:{min:0,max:20},showIf:e=>o(e)||i(e)}).addRadio({path:"emptyValue",name:"Empty Value",description:"Allow Empty Value for multi-choice variable.",defaultValue:!1,settings:{options:fo},showIf:e=>o(e)||i(e)}).addRadio({path:"persistent",name:"Persistent",description:"Allow to keep selected values if unavailable.",defaultValue:!1,settings:{options:mo},showIf:e=>o(e)||i(e)}),n.addRadio({path:"sticky",name:"Sticky position",description:"Variables will follow when scrolling.",settings:{options:io},defaultValue:!1,showIf:a}).addRadio({path:"autoScroll",name:"Auto Scroll to the selected value",settings:{options:go},defaultValue:!1,showIf:a}),n.addRadio({path:"header",name:"Header",settings:{options:oo},category:["Header"],defaultValue:!0,showIf:a}).addRadio({path:"filter",name:"Values filtering",settings:{options:ao},defaultValue:!1,category:["Header"],showIf:e=>a(e)&&e.header}).addRadio({path:"alwaysVisibleFilter",name:"Always Visible Search",settings:{options:lo},defaultValue:!1,category:["Header"],showIf:e=>a(e)&&e.header&&e.filter}).addRadio({path:"favorites",name:"Select favorites",description:"Saved in the browser storage for each user.",settings:{options:so},defaultValue:!1,category:["Header"],showIf:e=>a(e)&&e.header}).addRadio({path:"statusSort",name:"Sort by status",settings:{options:uo},defaultValue:!1,category:["Header"],showIf:e=>a(e)&&e.header}),n.addSelect({path:"variable",name:"Select variable to display",settings:{options:r},category:["Layout"],showIf:e=>{var t;return o(e)||!(null===(t=e.groups)||void 0===t?void 0:t.length)}}).addCustomEditor({id:"groups",path:"groups",name:"Tree View based on data source query",editor:Li,category:["Layout"],showIf:a}).addRadio({path:"showName",name:"Display variable names",settings:{options:co},defaultValue:!1,category:["Layout"],showIf:e=>{var t;return a(e)&&!!(null===(t=e.groups)||void 0===t?void 0:t.length)}}).addRadio({path:"groupSelection",name:"Allow group selection.",settings:{options:po},defaultValue:!1,category:["Layout"],showIf:e=>{var t;return a(e)&&!!(null===(t=e.groups)||void 0===t?void 0:t.length)}}),n.addSelect({path:"dashboardVariable",name:"Select variable with dashboard UID",description:"Allows to redirect to different dashboards",settings:{options:r},category:["Dashboard"]}),n.addFieldNamePicker({path:"name",name:"Field with variable values. First string field will be used if not specified.",settings:{filter:t=>t.type===e.FieldType.string,noFieldsMessage:"No strings fields found"},category:["Status"],showIf:e=>a(e)||i(e)}).addFieldNamePicker({path:"status",name:"Field with status values. First number field will be used if not specified.",settings:{filter:t=>t.type===e.FieldType.number,noFieldsMessage:"No number fields found"},category:["Status"],showIf:e=>a(e)||i(e)}),n}))})(),c})()));
//# sourceMappingURL=module.js.map